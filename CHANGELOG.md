## v2.2.3 - 2025-07-29

### 优化
- 改进相册列表样式

### 修复
- 修复使用手机号注册账号要求输入邮箱的 bug
- 修复独立页面 title 显示不正确的 bug

## v2.2.2 - 2025-07-28

### 新增
- 后台管理列表增加过滤器
- 支持设置默认上传储存
- 支持批量复制链接
- 支持控制广场是否展示

### 优化
- 改进样式
- 网页 title 根据当前菜单显示
- 仪表盘增加统计卡片
- 改进广场的图片列表显示

### 修复
- 修复使用 libvips 驱动时云处理输出图片还是使用 imagick 处理的 bug
- 修复图片处理中水印选择平铺后保存提示需要选择水印位置的 bug
- 修复删除图片后云处理缓存图片未被删除的 bug
- 修复七牛云无法使用云处理的 bug
- 修复 docker 运行时出现僵尸进程的 bug

## v2.2.1 - 2025-06-27

### 新增
- 储存支持控制是否需要生成缩略图
- 支持通过终端命令更改用户密码（包含管理员）
- 支持用户管理中删除指定用户所有图片
- 支持远程下载图片功能
- 增加按钮点击动作，控制上传按钮点击后打开上传队列或文件选择
- 重写 docker 脚本，现支持直接导入镜像安装，一键启动

### 优化
- 删除违规记录同时恢复图片状态
- 改进后台管理日期显示格式

### 修复
- 修复微信支付无法显示支付二维码的 bug
- 修复相册中的图片列表选中后，操作列不显示删除图片按钮的 bug
- 修复使用 mariadb 数据库时访问后台控制台报错的 bug
- 修复接口上传没有后缀名的文件，返回的链接也是没有后缀的 bug

## v2.2.0 - 2025-06-04

### 新增
- 新增邮件驱动器增加测试功能
- 新增支持自定义 css、js 代码（动态加载）
- 新增是否启用站点开关，混合部署下可控制是否启用前端（保留接口可用）
- 新增拖拽图片上传功能（任意页面）
- 新增系统信息统计接口，可通过后台控制是否启用（支持设置接口访问密钥）
- 新增储存支持设置缩略图最大尺寸和缩略图质量（新上传的图片生效）
- 新增队列列表的显示（进行中、异常队列、批处理队列）

### 优化
- 优化储存移除“i”前缀限制
- 优化升级前端工程库

### 修复
- 修复旧版本迁移数据后旧订单金额不正确的 bug
- 修复旧版本迁移后的储存无法修改的 bug
- 修复后台副标题设置不生效的 bug
- 修复图片单选选择时，其他图片会被取消选择的 bug
- 修复后台优惠券列表百分比优惠券面值显示错误的 bug
- 修复微信支付配置后提示“无可用的平台证书”的 bug

## v2.1.13 - 2025-05-04

### 新增
- 支持粘贴上传

### 优化
- 改进数据迁移脚本

### 修复
- 修复角色组设置「图片到期时间」后上传失败的 bug
- 修复 {uid} 命名规则不生效的 bug
- 修复阿里云设置根目录后无法上传的 bug

## v2.1.12 - 2025-05-02

### 修复
- 修复购买订阅始终获得的是第一个阶梯套餐的 bug

## v2.1.11 - 2025-04-30

### 新增
- 增加【复制链接时对URL进行编码】设置项
- 增加【选择图片后立刻上传】设置项
- 图片管理支持批量设置图片信息
- 图片管理支持快捷键多选/全选

### 优化
- 储存策略支持设置根目录
- 图形验证码使用 imagick 拓展生成
- 改进图片输出方式

### 修复
- 修复在图片管理页面复制链接为缩略图而不是原图的 bug
- 修复 ftp 储存上传异常的 bug
- 修复 sftp 上传异常的 bug
- 修复后台关闭邮件验证，注册页面依旧需要验证码的 bug
- 修复图片管理中复制图片链接为缩略图的链接的 bug
- 修复购买会员套餐后角色组无法正常切换的 bug
- 修复后台编辑用户的角色组导致用户出现重复角色组的 bug
- 修复旧版本接口兼容性问题
- 修复使用 Postgres 数据库安装报错的 bug
- 修复内容安全拦截图片后，物理文件没有被删除的 bug
- 修复游客上传图片后会跳转到登录页面的 bug
- 修复上传重复的图片(游客上传)会导致图片消失的 bug

## v2.1.10 - 2025-04-29

### 新增
- 储存驱动器增加测试功能
- 发送验证码增加图形验证功能

### 优化
- 去除 APP_LICENSE_KEY 环境变量配置
- 改进 docker 部署脚本
- 改进短信验证码发送逻辑

### 修复
- 修复更新系统时数据库更新命令执行失败的 bug
- 修复 docker 部署后重启容器导致系统异常的 bug
- 修复使用手机号注册后登录出错的 bug

## v2.1.9 - 2025-04-28

### 优化
- 改进安装脚本
- 改进数据迁移脚本

### 修复
- 修复社会化登录(QQ)无法使用的 bug
- 修复自定义页面切换无效的 bug

## v2.1.8 - 2025-04-28

### 优化
- 改进上传后日志显示
- docker 部署默认使用 mysql 8.0

### 修复
- 修复后台社会化登录驱动表单不显示回调地址的 bug
- 修复后台运行游客上传但游客无法上传图片的 bug
- 修复在 debian12 系统下 docker 部署脚本找不到 docker 命令的 bug
- 修复使用 docker 部署，https 反代后访问后台样式异常的 bug

## v2.1.7 - 2025-04-13

### 新增
- Token（令牌）支持分配权限
- 增加 docker 一键部署脚本
- 全新的上传页面和交互

### 优化
- 改进安装脚本
- 改进订阅购买页面
- 修改程序授权方式
- 改进更新逻辑
- 后台图片列表增加图片状态的显示（正常或违规）
- 验证码发送接口增加限流
- 前端增加验证邮箱、手机号的页面
- 改进邮件发送方式
- 邮件驱动支持设置独立的发件人信息
- 改进短信系统
- 侧边栏增加「个人资料」入口
- 完善国际化翻译
- 优化前端加载性能

### 修复
- 修复在登录情况下，系统关闭游客上传会提示不支持游客上传的 bug
- 修复后台管理中储存无法删除的 bug
- 修复购买会员套餐后，不显示该会员应用的储存的 bug
- 修复 nsfwjs 图片安全服务无法正常使用的 bug
- 修复邮件发送修改了配置后，重启才会生效的 bug
- 修复图片管理删除图片出错的 bug
- 修复相册详情无法分享图片的 bug
- 修复上传图片后，对应位置的数据没有实时更新的 bug
- 修复打开「显示原始照片」选项后列表预览图片变得更模糊的 bug
- 修复列表缩略图打开大图显示的不是原图的 bug
- 修复图片管理中删除图片后侧边栏容量未更新的 bug

### FAQ
- 本次更新需要在更新后进入当前数据库执行：`UPDATE `settings` SET `name` = 'license_key' WHERE `settings`.`name` = 'serial_no';`，否则系统可能会出现 500 错误。

## v2.1.6 - 2025-03-17

### 新增
- 添加对 libvips 图片处理驱动的支持
- 支持用户控制列表显示原始图片而不是缩略图

### 改进
- 后台支持切换图片处理器(Imagick、Libvips)
- 改进安装脚本
- 阿里云内容安全增强版 service 可自定义

### 修复
- 修复用户注册出错的 bug
- 修复从旧版本迁移的数据，文件路径不正确的 bug
- 修复使用七牛云储存出错的 bug
- 修复非管理员导航栏也显示后台入口的 bug
- 修复后台角色组编辑可能会取消掉默认组的 bug
- 修复后台编辑背景图出错的 bug
- 修复图片安全检测图片违规后图片依旧保存成功的 bug
- 修复登录账号后，上传页面的设置中依旧选择的是游客储存的 bug
- 修复无法直接通过后台在线升级的 bug

## v2.1.5 - 2025-02-18

### 改进
- 改进样式
- 改进广场和分享图片列表的显示大小
- 改进迁移脚本

### 修复
- 修复后台图片详情的图片预览溢出的bug
- 修复注册页面提示 name 不能为空的 bug
- 修复自定义用户组后，首页显示用户组错误的 bug
- 修复容量套餐过期后，左下角容量统计未更新的 bug
- 修复导航栏切换语言刷新后失效的 bug

## v2.1.4 - 2024-12-27

### 新增
- 自定义 tokens，可视化管理

### 改进
- 解决前端组件命名冲突
- 移除 ide-helper
- 替换系统配置获取方法(laravel-settings)
- 去除后台切换调试模式按钮

### 修复
- 修复数据无法迁移的 bug
- 修复后台修改用户角色组会使用户出现多个系统角色组的 bug
- 修复 Epay usdt 支付方式不显示的 bug
- 修复安装脚本找不到 php 命令的 bug
- 修复优惠券可重复使用的 bug
- 修复套餐设置了容量会出现无法支付回调处理失败的 bug
- 修复订单使用优惠券后，优惠券已使用次数未增加的 bug
- 修复后台订单金额统计不正确的 bug

## v2.1.3 - 2024-12-14

### 新增
- 支持易支付 V2 版本
- 多货币支持
- 后台管理国际化
- 前端国际化
- 增加首页、授权页面默认背景图

### 改进
- 重新设计支付系统
- 完善 404 页面
- 改进 docker 部署方式

### 修复
- 修复迁移脚本没有策略的图片迁移会出现失败的 bug
- 修复未选择角色组的套餐支付出现失败的 bug

## v2.1.1 - 2024-11-30

### 新增
- 后台增加首页快捷入口
- 增加安装脚本
- 适配 mysql 5.7
- 云处理支持设置预设版本
- 云处理支持定义可使用的参数

### 优化
- 改进样式
- 图片处理完后及时释放内存

### 修复
- 修复用户无法注册的 bug
- 修复除本地储存以外的储存无法创建的 bug

## v2.1.0 - 2024-11-17

### 新增
- 图片管理支持右键操作
- 管理员前端支持显示后台管理入口
- 增加违规图片转移目录功能
- 改进后台图片详情样式
- 审核驱动支持同步审核
- 新增图片处理器，并支持同步处理图片

### 优化
- 优化后台控制台图表显示
- 增加符号链接相关函数的安装验证
- 储存驱动支持直接创建根目录、云储存目录
- 改进后台用户创建与编辑
- 改进前端工程打包脚本
- 改进文本复制方法
- 将添加标签功能移动到编辑弹窗中
- 上传组件返回链接后，同时显示对应的图片
- 将储存驱动和云处理独立分开

### 修复
- 修复角色组无法创建的 bug
- 修复用户管理无法修改手机号的 bug
- 修复创建分享未设置密码会出错的 bug
- 修复分享内容不显示的 bug
- 修复分享内容的用户头像不显示的 bug
- 修复 0 元订单无法直接支付的 bug
- 修复首页容量显示不正确的 bug
- 修复验证邮箱时，提示邮箱格式不正确的 bug
- 修复验证手机号时，提示手机号格式不正确的 bug
- 修复订单支付完成后，第三方支付跳转回系统后出现页面 404 的 bug
- 修复访问首页，控制台显示 CryptoJS 引入错误的 bug
- 修复订单支付后，状态没有变更的 bug
- 修复图片编辑弹窗，显示内容不正确的 bug
- 修复邮件无法发送的 bug
- 修复创建页面时标题报错的 bug
- 修复侧边栏进度条显示不正确的 bug

## v2.0.1 - 2024-11-08

> 全新版本，全新架构。V2 版本是一个全新的使用前后端分离架构完全重写的系统，主要技术栈使用 <a target="__blank" href="https://laravel.com">Laravel 11</a> + <a target="__blank" href="https://cn.vuejs.org">Vue 3</a>，与旧版本对比存在巨大差异，请勿用于生产环境！

- 使用 <a target="__blank" href="https://filamentphp.com">filamentphp</a> 实现后台管理功能
- 使用 <a target="__blank" href="https://glide.thephpleague.com">Glide</a> 实现图片云处理功能
- 使用 <a target="__blank" href="https://uppy.io">Uppy.js</a> 实现上传页面，更具可靠性
- 支持 Docker 部署(实验性)
- 支持 Smtp、Mailgun、Postmark、Ses 四种邮件发送驱动
- 支持 本地、AWS S3、阿里云 OSS、腾讯云 COS、七牛云 Kodo、又拍云 USS、Sftp、Ftp、Webdav 储存驱动
- 支持 用户手机号绑定、登录、找回密码
- 支持 腾讯云 SMS、Ucloud、七牛云、SendCloud、阿里云、云片、Submail、螺丝帽、容联云通讯、等多达 30+ 的短信网关
- 支持 支付宝、微信、Paypal 三种支付驱动
- 支持 阿里云内容安全 1.0、阿里云内容安全增强版、腾讯云内容安全、Nsfw JS、ModerateContent 四种图片审核驱动
- 支持 QQ、Github 第三方授权登录驱动
- 支持 深色/浅色主题、适配三方主题
- 支持 密码分享(单个相册、多个图片)
- 数据库默认使用 sqlite，redis 改为可选配置项，取消计划任务配置
- 会员套餐、容量套餐分开设置，购买的套餐支持删除
- 系统支持的图片格式由 ImageImagick 库决定

## v1.7.1 - 2024-04-10

- 新增 重置用户角色组脚本
- 优化 支持修改没有在有效期内订阅的用户的角色组

FAQ：
此版本新增了一个重置用户角色组脚本，主要用于修复上一个版本破坏式更新导致的遗留问题，新安装的程序不受影响。具体体现如下：
- 购买了订阅的用户，赠送容量被收回的问题。
- 购买了订阅的角色组被重置为原始默认组。
解决方法：
1. 备份一下数据库
2. 进入程序根目录执行：php artisan lsky:reset-subscribe-group

***无任何输出则表示执行成功，执行后会重置用户的角色组为第一个订阅的角色组，此命令只能执行一次，否则会重复发放赠送容量***

## v1.7 - 2024-04-08

- 新增 图片管理手机端支持复制图片链接
- 新增 后台支持修改用户邮箱
- 新增 计划任务 30 分钟后自动取消订单
- 新增 后台控制台显示订单数量和金额
- 新增 管理员支持删除用户取消的订单
- 优化 重构套餐购买逻辑
  - 购买同一个订阅支持续费
  - 续费订阅不会增加赠送容量，只会修改角色组
  - 订阅到期后会按顺序重置角色组和扣除容量，没有订阅则会被重置为系统默认组
- 修复 违规记录列表的违规次数显示不正确的 bug
- 修复 套餐设置简介为空不生效的 bug
- 修复 工单详情的工单等级不显示的 bug
- 修复 粘贴图片无法触发直接上传的 bug
- 修复 使用 cdn 后上传的图片无法获取真实 ip 的 bug
- 修复 订单重复支付会失败的 bug
- 修复 细节样式问题

## v1.6.1 - 2023-12-29

- 修复 阿里云图片内容安全无法使用的 bug

## v1.6 - 2023-12-29

- 新增 记录用户、游客上传图片违规记录
- 新增 Dark mode(beta)
- 新增 支持修改系统货币符号
- 新增 支持阿里云内容审核增强版
- 新增 支持自定义系统缩略图质量
- 优化 取消订单后返还优惠券
- 优化 缓存多吉云凭证信息
- 优化 删除、修改相册时同时删除封面和背景图片
- 优化 重构图片内容审核逻辑
- 优化 AWS S3 策略支持在文件上设置公开 ACL
- 优化 支付二维码通过本地生成
- 修复 订单管理批量取消出错的 bug
- 修复 Windows 系统图片管理页面拖拽图片会触发上传的 bug

## v1.5.1 - 2023-10-04

- 新增 多吉云储存策略
- 修复 图片管理中使用高级搜索(IP)出错的 bug

#### FAQ
- 1.5 版本以后需要 PHP >= 8.1，更新前请注意 PHP 版本号以及环境配置是否符合要求，以及注意重新启用队列。

## v1.5 - 2023-10-02 

- 新增 程序使用免责声明
- 新增 注册邮箱黑/白名单功能
- 新增 支持 ModerateContent 鉴黄功能
- 新增 分页优化开关(游标分页)
- 优化 易支付更名为 Epay
- 优化 易支付兼容码支付
- 优化 登录与注册页面样式
- 优化 更新页面记录更新日志
- 优化 网站标题展示方式
- 修复 订单金额为零时无法支付的 bug
- 修复 后台修改用户名称字符限制错误的 bug
- 修复 图片和相册管理排序时出现筛选错误的 bug

#### FAQ
- 易支付功能出现破坏性变更，如果已使用易支付功能，请在更新后重新更改支付接口地址。
- 此版本最低要求 PHP >= 8.1

## v1.4 - 2023-07-15

- 新增 重新上传图片功能
- 新增 支持易支付
- 改进 登录页面
- 改进 首页横幅描述支持 html
- 改进 同一个优惠码一个用户仅能使用一次
- 改进 s3 储存策略支持切换路径模式
- 修复 工单状态显示不正确的 bug
- 修复 优惠券折扣可以设置为 0 的 bug
- 修复 优惠券折扣显示不正确的 bug

## v1.3.3 - 2023-03-26

- 新增 上传接口支持使用临时 Token 功能
- 新增 辅助功能
- 改进 角色组支持固定上传时设置的到期时间
- 改进 图片管理 PC 端支持批量复制图片链接
- 改进 用户列表显示验证时间
- 改进 WebDav 支持多种验证方式
- 修复 微信支付无法调起的 bug
- 修复 使用优惠券百分比抵扣折扣率显示错误的 bug
- 修复 format_size 函数格式化时会发生崩溃的 bug
- 修复 自定义页面无法被隐藏的 bug
- 修复 手机端侧边栏无法看到底部剩余容量的 bug
- 修复 模态框和其他弹窗样式冲突的 bug
- 修复 手机端设置页面下拉选与侧边栏样式冲突的 bug

## v1.3.2 - 2022-12-21

- 新增 支持任意页面拖拽图片上传功能
- 改进 图片管理支持使用键盘左右键翻页
- 改进 默认允许所有代理请求
- 改进 经典上传页面按钮样式
- 改进 图片广场显示样式
- 改进 接口请求频率限制
- 修复 页面管理数据无法保存的 bug
- 修复使用 sqlite 数据库无法安装程序的 bug
- 修复 访问时执行了多余 sql 导致卡顿的 bug

 更新完成后若出现「全局拖拽上传」功能控制开关无法切换的情况，请执行命令 `php artisan db:seed`

## v1.3.1 - 2022-11-03

- 修复 覆盖模式水印无效的 bug
- 修复 页面管理保存后内容丢失的 bug
- 修复 底部自定义内容不支持 html 的 bug
- 修复 Paypal 正常模式下无法支付的 bug
- 修复 广场图片预览高度过低导致错版的 bug

## v1.3 - 2022-10-10

- 新增 Paypal 支付功能
- 新增 工单系统支持创建、回复后发送邮件通知
- 新增 支持通过后台添加用户
- 改进 支持跳过角色组的图片处理功能
- 改进 上传服务
- 改进 不在支持游客上传图片时设置图片权限，默认为私有
- 改进 授权页面显示底部信息
- 改进 经典上传页面样式
- 改进 全站公告弹窗不支持点击空白处关闭，防止误触
- 改进 全站公告弹窗关闭方式
- 改进 角色组图片处理质量默认为 75%
- 改进 页面管理、全站公告、底部代码设置取消富文本编辑器
- 修复 使用优惠券可能出现对应选择的阶梯价格错误的 bug
- 修复 当文件夹命名规则为用户ID时，游客上传后返回了错误路径的 bug
- 修复 使用图片处理功能后上传照片会被旋转的 bug
- 修复 底部无法显示备案号的 bug
- 修复 站内公告排序值设置无效的 bug
- 修复 个人主页中的图片、相册列表无法点赞的 bug
- 修复 总后台统计数据不正确的 bug
- 修复 广场可以复制删除链接的 bug

## v1.2 - 2022-08-10

- 新增 上传页面支持切换经典上传页面
- 新增 社会化登录功能(QQ、GitHub)
- 新增 支持图片软删除功能(使用角色组控制)
- 新增 支持自定义 blade 模板文件
- 新增 支持自定义 Gravatar 镜像源
- 新增 支持使用角色组控制上传图片的格式
- 新增 支持使用角色组控制上传图片保存的质量
- 新增 上传后图片支持返回删除链接
- 改进 更新系统后安全的退出队列进程
- 改进 支持设置网站副标题
- 改进 阿里云 Oss 储存策略的连接方式
- 修复 页面管理中无法创建自定义页面的 bug
- 修复 删除图片后会导致统计数据错误的 bug
- 修复 使用原文件名命名规则时可能会返回错误的链接的 bug
- 修复 图片无法被移出相册的 bug
- 修复 站内公告内容文本溢出页面的 bug
- 修复 部分页面文案错误

FAQ：⚠️如果更新后网站无法访问，请尝试在程序根目录执行命令：
`php artisan migrate --seed && php artisan db:seed --class=CorrectStatSeeder && php artisan optimize:clear`

## v1.1.1 - 2022-07-31

- 优化 异步队列
- 修复 购买订阅后用户保存数据会导致容量或组被修改的 bug
- 修复 下单页面阶梯价格点击选择时选中状态异常的 bug
- 修复 工单回复记录显示不完整的 bug

## v1.1 - 2022-07-29

- 新增 后台增加数据分布统计饼状图
- 优化 背景图支持自定义图片地址
- 优化 升级 sftp 储存驱动
- 修复 储存策略无法保存的 bug
- 修复 单次优惠码可以重复被使用的 bug
- 修复 后台无法修改用户的角色组、容量、状态的 bug
- 修复 开启自动清除预览功能后上传后无法显示链接的 bug
- 修复 开启原图保护后访问图片出现500的 bug
- 修复 部分主机 ftp 被动模式下无法连接的问题
- 修复 支付宝配置默认值错误的 bug
- 修复 套餐、订单部分位置赠送容量显示不正确的 bug
- 修复 统计数据不正确的 bug
- 修复 微信支付配置异常的 bug
- 修复 未开启任何支付驱动时无法支付订单的 bug
- 修复 套餐未填写角标内容无法保存的 bug
- 修复 富文本编辑器弹窗中的按钮颜色显示不正确的 bug

##### 注意，这是一个企业版的第二个公测版本，使用过程中出现问题可以在群内或发送邮件的方式反馈给我们，帮助我们完善它。

## v1.0 - 2022-07-23

- 角色组控制与多策略支持
- 多用户、相册、接口、图片广场功能
- 图片审核、水印、原图保护功能
- 批量上传、粘贴上传、拖拽上传、复制嵌入式代码
- 接口支持设置权限，可视化管理 Token
- 分享相册、图片，支持密码分享
- 用户主页、用户的公开图片和相册
- 站内公告、收集意见、举报管理、独立页面管理
- 套餐系统、工单系统、优惠券管理、IP 屏蔽功能
- 适配支付宝、微信官方支付功能
- 并发上传优化、百万图片数据量基准优化

#### 注意，这是一个企业版的第一个公测版本，使用过程中出现问题可以在群内或发送邮件的方式反馈给我们，帮助我们完善它。
