import{z as e,r as a}from"./index-DZdj2b_n.js";import{a as l}from"./album-dTOteY8-.js";import{k as t,r as s,$ as o,N as u,Y as r,Q as i,M as n,P as d,K as p,j as v,a7 as c,L as m}from"./vue-vendors-B4XdlKKZ.js";import{G as f,m as y,I as b,y as x,A as _,t as h,K as w,B as g}from"./naive-ui-DFBPfLe9.js";import{F as j}from"./icons-C1_zt0kT.js";import{s as k}from"./Layout.vue_vue_type_script_setup_true_lang-Bd80f82b.js";const $=t({__name:"Delete",setup(a,{expose:t}){const u=l(),r=s({}),i=f(),{t:n}=o();return t({open:function(a,l=()=>{}){r.value=a;const t=i.warning({title:n("Delete Album"),content:n("Are you sure you want to delete this album?"),positiveText:n("Confirm"),negativeText:n("Cancel"),onPositiveClick:()=>(t.loading=!0,new Promise((a=>{e({path:{id:r.value.id}}).then((()=>{u.deleteAlbums([r.value.id]),l(),a(!0)})).finally((()=>{t.loading=!1}))})))})}}),(e,a)=>null}}),C={class:"flex flex-col space-y-4"},A={key:0,class:"flex justify-end"},S={key:1,class:"flex justify-between space-x-2"},T=t({__name:"Share",setup(e,{expose:l}){const t=s(!1),f=s({}),$=s(),T=s({type:"album",ids:[]}),D={},P=s(""),U=y(),{t:z}=o();function E(){a({body:T.value}).then((e=>{var a,l,t;if("error"===(null==(a=e.data)?void 0:a.status))return U.error(null==(l=e.data)?void 0:l.message);P.value=`${window.location.origin}/shares/${null==(t=e.data)?void 0:t.data.slug}`}))}return l({open:function(e){P.value="",f.value=e,T.value.ids=[f.value.id],t.value=!0}}),(e,a)=>(m(),u(r(b),{show:t.value,"onUpdate:show":a[4]||(a[4]=e=>t.value=e),title:e.$t("Share Album"),preset:"card",size:"small",bordered:!1,class:"max-w-screen-sm mx-4 md:mx-auto"},{action:i((()=>[P.value?(m(),p("div",S,[d(r(h),{class:"grow select-all","default-value":P.value,readonly:""},null,8,["default-value"]),d(r(g),{tertiary:"",type:"primary",class:"shrink-0",onClick:a[3]||(a[3]=()=>{r(k).copyText(P.value).then((()=>{r(U).success(r(z)("Copy successful"))})).catch((()=>{r(U).error(r(z)("Copy failed"))}))})},{icon:i((()=>[d(r(j),{icon:"fa-solid fa-copy"})])),_:1})])):(m(),p("div",A,[d(r(g),{tertiary:"",onClick:E},{default:i((()=>[v(c(e.$t("Create Share Link")),1)])),_:1})]))])),default:i((()=>[n("div",C,[d(r(x),{ref_key:"formRef",ref:$,model:T.value,rules:D,disabled:Boolean(P.value)},{default:i((()=>[d(r(_),{label:e.$t("Share Description"),path:"content"},{default:i((()=>[d(r(h),{resizable:"",type:"textarea",value:T.value.content,"onUpdate:value":a[0]||(a[0]=e=>T.value.content=e)},null,8,["value"])])),_:1},8,["label"]),d(r(_),{label:e.$t("Password"),path:"password"},{default:i((()=>[d(r(h),{type:"password",value:T.value.password,"onUpdate:value":a[1]||(a[1]=e=>T.value.password=e)},null,8,["value"])])),_:1},8,["label"]),d(r(_),{label:e.$t("Expiration Time"),path:"password"},{default:i((()=>[d(r(w),{"formatted-value":T.value.expired_at,"onUpdate:formattedValue":a[2]||(a[2]=e=>T.value.expired_at=e),type:"datetime",class:"w-full",placeholder:e.$t("Select Expiration Time"),"is-date-disabled":e=>e<Date.now(),"value-format":"yyyy-MM-dd HH:mm:ss",clearable:""},null,8,["formatted-value","placeholder","is-date-disabled"])])),_:1},8,["label"])])),_:1},8,["model","disabled"])])])),_:1},8,["show","title"]))}});export{$ as _,T as a};
