import{_ as a,a as e}from"./ExploreImage.vue_vue_type_script_setup_true_lang-DTB10U6K.js";import{a as l,aa as s,ab as t}from"./index-DZdj2b_n.js";import{k as o,a6 as u,r,o as n,K as i,P as d,Q as v,F as m,a8 as p,L as c,M as f,a7 as _,Y as x,j as g,R as h,N as y}from"./vue-vendors-B4XdlKKZ.js";import{_ as b}from"./Content.vue_vue_type_script_setup_true_lang-CEfikmAR.js";import{_ as j,c as w,b as k}from"./Layout.vue_vue_type_script_setup_true_lang-Bd80f82b.js";import{m as A,p as q,B as z,q as L}from"./naive-ui-DFBPfLe9.js";import"./utils-DGAJShNI.js";import"./icons-C1_zt0kT.js";import"./photo-components-DTzq5atJ.js";const N={class:"w-full"},R={class:"container mx-auto p-4 sm:p-8"},$={class:"flex flex-col sm:flex-row sm:justify-between mb-10 w-full"},C={class:"flex flex-col"},I={class:"text-2xl mb-4 font-bold"},B={class:"flex items-center w-full"},D={class:"flex flex-col ml-2 w-full overflow-hidden"},E={class:"mt-4"},F={class:"flex justify-end mt-2 sm:mt-0"},K={class:"my-4"},M={class:"masonry-container"},P=k(o({__name:"AlbumView",setup(o){var k,P;const Q=p(),T=u(),U=A(),V=l();V.configs&&!(null==(P=null==(k=V.configs)?void 0:k.app)?void 0:P.enable_explore)&&T.replace("/404");const Y=r(null),G=r({}),H=r(0),J=r([]),O=r(""),S=r(1),W=r(!1),X=r(!1);async function Z(a={}){var e,l,o,u,r,n,i,d,v;const m=await s({path:{id:Number(Q.params.id)}});if("error"===(null==(e=m.data)?void 0:e.status))return U.error(null==(l=m.data)?void 0:l.message);G.value=null==(o=m.data)?void 0:o.data;const p=await t({path:{id:Number(Q.params.id)},query:{q:O.value,page:S.value,...a}});if("error"===(null==(u=p.data)?void 0:u.status))return U.error(null==(r=p.data)?void 0:r.message);J.value.push(...(null==(n=p.data)?void 0:n.data.data)||[]),W.value=!1,H.value=(null==(i=p.data)?void 0:i.data.meta.total)||0,X.value=(null==(d=p.data)?void 0:d.data.meta.last_page)===(null==(v=p.data)?void 0:v.data.meta.current_page),S.value++}function aa(){W.value||X.value||Z()}function ea(){var a;null==(a=Y.value)||a.open({path:{id:Q.params.id}})}return n((()=>{Z()})),(l,s)=>(c(),i(m,null,[d(a,{ref_key:"reportRef",ref:Y,type:"album"},null,512),d(j,{"toggle-header":!1,"show-footer":!0,"header-title":l.$t("Album Details")},{default:v((()=>[d(b,null,{default:v((()=>{var a,s;return[f("div",N,[f("div",R,[f("div",$,[f("div",C,[f("p",I,_(G.value.name),1),f("div",B,[d(x(q),{class:"shrink-0",round:"",size:"medium",src:x(w).getUserAvatar(null==(a=G.value.user)?void 0:a.avatar_url)},null,8,["src"]),f("div",D,_(null==(s=G.value.user)?void 0:s.name),1)]),f("p",E,_(G.value.intro),1)]),f("div",F,[d(x(z),{secondary:"",strong:"",size:"small",onClick:ea},{default:v((()=>[g(_(l.$t("Report")),1)])),_:1})])]),f("p",K,_(l.$t("Total {count} photos",{count:H.value})),1)]),d(x(L),{onLoad:aa},{default:v((()=>[f("div",M,[(c(!0),i(m,null,h(J.value,(a=>(c(),y(e,{photo:a,key:a.id},null,8,["photo"])))),128))])])),_:1})])]})),_:1})])),_:1},8,["header-title"])],64))}}),[["__scopeId","data-v-60c5e275"]]);export{P as default};
