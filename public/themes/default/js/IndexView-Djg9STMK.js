import{_ as t}from"./Content.vue_vue_type_script_setup_true_lang-CEfikmAR.js";import{b as e,a,k as s,l as r,m as l,n as i,o,q as n}from"./index-DZdj2b_n.js";import{F as d}from"./icons-C1_zt0kT.js";import{_ as c,n as u,u as p,d as x}from"./Layout.vue_vue_type_script_setup_true_lang-Bd80f82b.js";import{k as f,$ as g,r as y,o as v,w as m,N as _,Q as k,P as b,U as h,M as $,Y as w,K as L,R as C,F as P,a7 as j,j as S,L as T,m as z}from"./vue-vendors-B4XdlKKZ.js";import{a as M,G as U,m as D,r as N,v as q,B as G,H as R}from"./naive-ui-DFBPfLe9.js";import"./utils-DGAJShNI.js";import"./photo-components-DTzq5atJ.js";const A=["onClick"],E={class:"text-gray-400 flex shrink-0 ml-2"},F={class:"space-y-6 md:space-y-0 md:grid md:grid-cols-2 xl:grid-cols-4 md:gap-x-4 xl:gap-x-8 md:gap-y-4 xl:gap-y-8"},I={class:"flex flex-col"},H={class:"text-gray-700 text-sm dark:text-gray-400"},O={class:"text-gray-800 font-semibold text-xl dark:text-gray-200"},V={class:"flex flex-col"},W={class:"text-gray-700 text-sm dark:text-gray-400"},Y={class:"text-gray-800 font-semibold text-xl dark:text-gray-200"},B={class:"flex flex-col"},K={class:"text-gray-700 text-sm dark:text-gray-400"},Q={class:"text-gray-800 font-semibold text-xl dark:text-gray-200"},J={class:"flex flex-col"},X={class:"text-gray-700 text-sm dark:text-gray-400"},Z={class:"text-gray-800 font-semibold text-xl dark:text-gray-200"},tt={class:"flex flex-col"},et={class:"text-gray-700 text-sm dark:text-gray-400"},at={class:"text-gray-800 font-semibold text-xl dark:text-gray-200"},st={class:"flex flex-col"},rt={class:"text-gray-700 text-sm dark:text-gray-400"},lt={class:"text-gray-800 font-semibold text-xl dark:text-gray-200"},it={class:"flex flex-col"},ot={class:"text-gray-700 text-sm dark:text-gray-400"},nt={class:"text-gray-800 font-semibold text-xl dark:text-gray-200"},dt={class:"flex flex-col"},ct={class:"text-gray-700 text-sm dark:text-gray-400"},ut={class:"text-gray-800 font-semibold text-xl dark:text-gray-200"},pt={class:"relative flex flex-col p-4 bg-slate-50 dark:bg-gray-800 hover:bg-slate-100 dark:hover:bg-slate-800/70 rounded-md"},xt={class:"flex justify-between"},ft={class:"space-y-2"},gt={class:"text-xl text-gray-900 dark:text-gray-100"},yt={key:0,class:"text-sm text-gray-800 dark:text-gray-100"},vt={key:1,class:"text-xs text-gray-600 dark:text-gray-200"},mt={key:0},_t={key:2,class:"text-xs text-gray-600 dark:text-gray-200"},kt={key:0},bt={class:"relative flex flex-col p-4 bg-slate-50 dark:bg-gray-800 hover:bg-slate-100 dark:hover:bg-slate-800/70 rounded-md"},ht={class:"flex justify-between"},$t={class:"space-y-2"},wt={class:"text-xl text-gray-900 dark:text-gray-100"},Lt={key:0,class:"text-xs text-gray-600 dark:text-gray-200"},Ct={key:0},Pt={key:1,class:"text-xs text-gray-600 dark:text-gray-200"},jt={key:0},St={class:"flex md:mt-8 flex-col-reverse md:flex-row space-y-6 md:space-y-0 md:space-x-4"},Tt={class:"w-full mt-4 md:mt-0"},zt={class:"w-full p-4 bg-slate-50 dark:bg-gray-800 hover:bg-slate-100 dark:hover:bg-slate-800/70 rounded-md"},Mt={class:"dark:text-gray-400"},Ut={class:"text-gray-700 text-xs dark:text-gray-100"},Dt={class:"flex flex-col md:w-[70%] xl:w-[40%] space-y-8"},Nt={class:"flex"},qt={class:"basis-1/3 dark:text-gray-400"},Gt={class:"basis-2/3 truncate text-gray-800 dark:text-gray-100"},Rt={class:"flex"},At={class:"basis-1/3 dark:text-gray-400"},Et={class:"basis-2/3 truncate text-gray-800 dark:text-gray-100"},Ft={class:"flex"},It={class:"basis-1/3 dark:text-gray-400"},Ht={class:"basis-2/3 truncate text-gray-800 dark:text-gray-100"},Ot={class:"flex"},Vt={class:"basis-1/3 dark:text-gray-400"},Wt={class:"basis-2/3 truncate text-gray-800 dark:text-gray-100"},Yt={class:"space-y-4"},Bt={class:"space-y-2"},Kt={key:0,class:"font-medium"},Qt={key:1,class:"font-medium"},Jt={class:"flex flex-wrap gap-2"},Xt={class:"flex"},Zt={class:"basis-1/2 dark:text-gray-400"},te={class:"basis-1/2 truncate text-gray-800 dark:text-gray-100"},ee={class:"flex"},ae={class:"basis-1/2 dark:text-gray-400"},se={class:"basis-1/2 truncate text-gray-800 dark:text-gray-100"},re={class:"flex"},le={class:"basis-1/2 dark:text-gray-400"},ie={class:"basis-1/2 truncate text-gray-800 dark:text-gray-100"},oe={class:"flex"},ne={class:"basis-1/2 dark:text-gray-400"},de={class:"basis-1/2 truncate text-gray-800 dark:text-gray-100"},ce={class:"flex"},ue={class:"basis-1/2 dark:text-gray-400"},pe={class:"basis-1/2 truncate text-gray-800 dark:text-gray-100"},xe={class:"flex"},fe={class:"basis-1/2 dark:text-gray-400"},ge={class:"basis-1/2 truncate text-gray-800 dark:text-gray-100"},ye={class:"flex"},ve={class:"basis-1/2 dark:text-gray-400"},me={class:"basis-1/2 truncate text-gray-800 dark:text-gray-100"},_e={class:"flex"},ke={class:"basis-1/2 dark:text-gray-400"},be={class:"basis-1/2 truncate text-gray-800 dark:text-gray-100"},he=f({__name:"IndexView",setup(f){var he,$e;const we=M(),Le=U(),Ce=D(),Pe=e(),je=a(),{t:Se}=g(),Te=Math.max(((null==(he=Pe.profile)?void 0:he.total_storage)||0)-((null==($e=Pe.profile)?void 0:$e.used_storage)||0),0),ze=y([]),Me=y([]),Ue=y([]),De=t=>{const e=p(),a=p(t).diff(e);if(a<=0)return"已过期";const s=x.duration(a);return`${Math.floor(s.asDays())} 天 ${s.hours()} 小时 ${s.minutes()} 分钟 ${s.seconds()} 秒`};return v((()=>{s({query:{page:1,per_page:999}}).then((t=>{var e;ze.value=(null==(e=t.data)?void 0:e.data.data)||[]})),r({query:{page:1,per_page:99}}).then((t=>{var e;Me.value=(null==(e=t.data)?void 0:e.data.data)||[]})),l({query:{page:1,per_page:99}}).then((t=>{var e;Ue.value=(null==(e=t.data)?void 0:e.data.data)||[]}))})),m((()=>Pe.profile),(()=>{l({query:{page:1,per_page:99}}).then((t=>{var e;Ue.value=(null==(e=t.data)?void 0:e.data.data)||[]}))}),{deep:!0}),(e,a)=>(T(),_(c,{"header-title":e.$t("Dashboard"),"toggle-header":!1,"show-footer":!1},{default:k((()=>[b(t,{class:"mx-auto p-4 md:p-10 space-y-10"},{default:k((()=>{var t,s,c,x,f,g;return[ze.value.length>0?(T(),_(w(N),{key:0,title:"站内公告"},{default:k((()=>[(T(!0),L(P,null,C(ze.value,(t=>(T(),L("div",{class:"flex justify-between py-1 px-2 w-full transition-all rounded hover:bg-slate-100 dark:hover:bg-slate-800 cursor-pointer",onClick:e=>(async t=>{var e,a;const s=await i({path:{id:t}});if(!(null==(e=s.data)?void 0:e.status))return Ce.error(s.data.message);we.create({title:null==(a=s.data)?void 0:a.data.title,preset:"card",class:"container m-4 md:mx-auto md:my-10 max-w-screen-md",content:()=>{var t,e;return[z("article",{class:"prose dark:prose-invert max-w-none overflow-x-auto",innerHTML:null==(t=s.data)?void 0:t.data.content}),z("p",{class:"mt-6 text-right"},p(null==(e=s.data)?void 0:e.data.created_at).fromNow())]}})})(t.id||0)},[b(w(R),null,{default:k((()=>[S(j(t.title),1)])),_:2},1024),$("span",E,j(w(p)(t.created_at).fromNow()),1)],8,A)))),256))])),_:1})):h("",!0),$("div",F,[b(w(N),{"content-class":"flex space-x-4"},{default:k((()=>{var t;return[b(w(d),{icon:"fas fa-images",class:"text-amber-500 text-5xl"}),$("div",I,[$("p",H,j(e.$t("Number of Photos")),1),$("p",O,j(w(u).format((null==(t=w(Pe).profile)?void 0:t.photo_count)||0)),1)])]})),_:1}),b(w(N),{"content-class":"flex space-x-4"},{default:k((()=>[b(w(d),{icon:"fas fa-hdd",class:"text-red-500 text-5xl"}),$("div",V,[$("p",W,j(e.$t("Available Storage")),1),$("p",Y,j(w(u).fileSize(1024*w(Te))),1)])])),_:1}),b(w(N),{"content-class":"flex space-x-4"},{default:k((()=>{var t;return[b(w(d),{icon:"fas fa-hdd",class:"text-green-500 text-5xl"}),$("div",B,[$("p",K,j(e.$t("Used Storage")),1),$("p",Q,j(w(u).fileSize(1024*((null==(t=w(Pe).profile)?void 0:t.used_storage)||0))),1)])]})),_:1}),b(w(N),{"content-class":"flex space-x-4"},{default:k((()=>{var t;return[b(w(d),{icon:"fas fa-hdd",class:"text-emerald-500 text-5xl"}),$("div",J,[$("p",X,j(e.$t("Total Storage")),1),$("p",Z,j(w(u).fileSize(1024*((null==(t=w(Pe).profile)?void 0:t.total_storage)||0))),1)])]})),_:1}),b(w(N),{"content-class":"flex space-x-4"},{default:k((()=>{var t;return[b(w(d),{icon:"fas fa-folder",class:"text-blue-500 text-5xl"}),$("div",tt,[$("p",et,j(e.$t("Album Count")),1),$("p",at,j(w(u).format((null==(t=w(Pe).profile)?void 0:t.album_count)||0)),1)])]})),_:1}),b(w(N),{"content-class":"flex space-x-4"},{default:k((()=>{var t;return[b(w(d),{icon:"fas fa-share-alt",class:"text-purple-500 text-5xl"}),$("div",st,[$("p",rt,j(e.$t("Share Count")),1),$("p",lt,j(w(u).format((null==(t=w(Pe).profile)?void 0:t.share_count)||0)),1)])]})),_:1}),b(w(N),{"content-class":"flex space-x-4"},{default:k((()=>{var t;return[b(w(d),{icon:"fas fa-receipt",class:"text-orange-500 text-5xl"}),$("div",it,[$("p",ot,j(e.$t("Order Count")),1),$("p",nt,j(w(u).format((null==(t=w(Pe).profile)?void 0:t.order_count)||0)),1)])]})),_:1}),b(w(N),{"content-class":"flex space-x-4"},{default:k((()=>{var t;return[b(w(d),{icon:"fas fa-life-ring",class:"text-pink-500 text-5xl"}),$("div",dt,[$("p",ct,j(e.$t("Ticket Count")),1),$("p",ut,j(w(u).format((null==(t=w(Pe).profile)?void 0:t.ticket_count)||0)),1)])]})),_:1})]),Me.value.length>0?(T(),_(w(N),{key:1,title:e.$t("Owned Role Groups"),"content-class":"space-y-2"},{default:k((()=>[(T(!0),L(P,null,C(Me.value,(t=>{var a,s,l;return T(),L("div",pt,[$("div",xt,[$("div",ft,[$("h2",gt,j(null==(a=t.group)?void 0:a.name),1),(null==(s=t.group)?void 0:s.intro)?(T(),L("p",yt,j(null==(l=t.group)?void 0:l.intro),1)):h("",!0),"subscribe"===t.from?(T(),L("p",vt,[$("span",null,j(e.$t("Purchased on {date}",{date:w(p)(t.created_at).format("LLL")})),1),t.expired_at?(T(),L("span",mt,", "+j(e.$t("Expires on {expired_at}, {day} remaining",{expired_at:w(p)(t.expired_at).format("LLL"),day:De(t.expired_at)}))+"。",1)):h("",!0)])):(T(),L("p",_t,j(e.$t("This role group is gifted by the system")),1))]),"system"!==t.from?(T(),L("div",kt,[b(w(G),{type:"error",size:"small",strong:"",secondary:"",onClick:e=>(t=>{const e=Le.warning({title:Se("Delete Purchased Role Groups"),content:Se("Warning: This action cannot be undone!"),positiveText:Se("Confirm"),negativeText:Se("Cancel"),onPositiveClick:()=>(e.loading=!0,new Promise((e=>{o({path:{id:t}}).then((()=>{r().then((t=>{var a;Me.value=(null==(a=t.data)?void 0:a.data.data)||[],e(1)}))}))})))})})(t.id||0)},{default:k((()=>[S(j(e.$t("Delete")),1)])),_:2},1032,["onClick"])])):h("",!0)])])})),256))])),_:1},8,["title"])):h("",!0),Ue.value.length>0?(T(),_(w(N),{key:2,title:e.$t("Owned Storage"),"content-class":"space-y-2"},{default:k((()=>[(T(!0),L(P,null,C(Ue.value,(t=>(T(),L("div",bt,[$("div",ht,[$("div",$t,[$("h2",wt,j(w(u).fileSize(1024*(t.capacity||0))),1),"subscribe"===t.from?(T(),L("p",Lt,[$("span",null,j(e.$t("Purchased on {date}",{date:w(p)(t.created_at).format("LLL")})),1),t.expired_at?(T(),L("span",Ct,", "+j(e.$t("Expires on {expired_at}, {day} remaining",{expired_at:w(p)(t.expired_at).format("LLL"),day:De(t.expired_at)}))+"。",1)):h("",!0)])):(T(),L("p",Pt,j(e.$t("This storage is gifted by the system")),1))]),"system"!==t.from?(T(),L("div",jt,[b(w(G),{type:"error",size:"small",strong:"",secondary:"",onClick:e=>(t=>{const e=Le.warning({title:Se("Delete Purchased Storage"),content:Se("Warning: This action cannot be undone!"),positiveText:Se("Confirm"),negativeText:Se("Cancel"),onPositiveClick:()=>(e.loading=!0,new Promise((e=>{n({path:{id:t}}).then((()=>{l().then((t=>{var a;Ue.value=(null==(a=t.data)?void 0:a.data.data)||[],e(1)}))}))})))})})(t.id||0)},{default:k((()=>[S(j(e.$t("Delete")),1)])),_:2},1032,["onClick"])])):h("",!0)])])))),256))])),_:1},8,["title"])):h("",!0),$("div",St,[$("div",Tt,[(null==(t=w(je).group)?void 0:t.storages)?(T(),_(w(N),{key:0,title:e.$t("Available Policies"),"content-class":"divide-y dark:divide-slate-700 divide-solid space-y-2"},{default:k((()=>{var t;return[(T(!0),L(P,null,C(null==(t=w(je).group)?void 0:t.storages,(t=>(T(),L("div",zt,[$("p",Mt,j(t.name),1),$("span",Ut,j(t.intro),1)])))),256))]})),_:1},8,["title"])):h("",!0)]),$("div",Dt,[b(w(N),{title:e.$t("My Information"),"content-class":"space-y-3"},{default:k((()=>{var t,a,s,r;return[$("div",Nt,[$("p",qt,j(e.$t("Full Name")),1),$("p",Gt,j(null==(t=w(Pe).profile)?void 0:t.name),1)]),$("div",Rt,[$("p",At,j(e.$t("Email")),1),$("p",Et,j(null==(a=w(Pe).profile)?void 0:a.email),1)]),$("div",Ft,[$("p",It,j(e.$t("Registration Time")),1),$("p",Ht,j(w(p)(null==(s=w(Pe).profile)?void 0:s.created_at).format("LLL")),1)]),$("div",Ot,[$("p",Vt,j(e.$t("Login IP")),1),$("p",Wt,j(null==(r=w(Pe).profile)?void 0:r.login_ip),1)])]})),_:1},8,["title"]),(null==(s=w(je).configs)?void 0:s.app.user_email_verify)&&!(null==(c=w(Pe).profile)?void 0:c.email_verified_at)||(null==(x=w(je).configs)?void 0:x.app.user_phone_verify)&&!(null==(f=w(Pe).profile)?void 0:f.phone_verified_at)?(T(),_(w(N),{key:0},{default:k((()=>{var t,s,r,l;return[$("div",Yt,[b(w(q),{type:"warning","show-icon":!0,title:""},{icon:k((()=>[b(w(d),{icon:"fas fa-exclamation-triangle"})])),default:k((()=>{var t,a,s,r;return[$("div",Bt,[(null==(t=w(je).configs)?void 0:t.app.user_email_verify)&&!(null==(a=w(Pe).profile)?void 0:a.email_verified_at)?(T(),L("p",Kt,j(e.$t("Your email has not been verified. Please verify your email to ensure account security.")),1)):h("",!0),(null==(s=w(je).configs)?void 0:s.app.user_phone_verify)&&!(null==(r=w(Pe).profile)?void 0:r.phone_verified_at)?(T(),L("p",Qt,j(e.$t("Your phone number has not been verified. Please verify your phone number to ensure account security.")),1)):h("",!0)])]})),_:1}),$("div",Jt,[(null==(t=w(je).configs)?void 0:t.app.user_email_verify)&&!(null==(s=w(Pe).profile)?void 0:s.email_verified_at)?(T(),_(w(G),{key:0,type:"primary",onClick:a[0]||(a[0]=t=>e.$router.push("/user/profile?tab=email"))},{default:k((()=>[S(j(e.$t("Verify Email")),1)])),_:1})):h("",!0),(null==(r=w(je).configs)?void 0:r.app.user_phone_verify)&&!(null==(l=w(Pe).profile)?void 0:l.phone_verified_at)?(T(),_(w(G),{key:1,type:"primary",onClick:a[1]||(a[1]=t=>e.$router.push("/user/profile?tab=phone"))},{default:k((()=>[S(j(e.$t("Verify Phone")),1)])),_:1})):h("",!0)])])]})),_:1})):h("",!0),(null==(g=w(je).group)?void 0:g.group)?(T(),_(w(N),{key:1,title:e.$t("Current Role Group Information"),"content-class":"space-y-3"},{default:k((()=>{var t,a,s,r,l,i,o,n;return[$("div",Xt,[$("p",Zt,j(e.$t("Group Name")),1),$("p",te,j(null==(t=w(je).group)?void 0:t.group.name),1)]),$("div",ee,[$("p",ae,j(e.$t("Maximum File Size")),1),$("p",se,j(w(u).fileSize(1024*(null==(a=w(je).group)?void 0:a.group.options.max_upload_size))),1)]),$("div",re,[$("p",le,j(e.$t("Concurrent Uploads")),1),$("p",ie,j(e.$t("{count} Pictures",{count:w(u).format(null==(s=w(je).group)?void 0:s.group.options.limit_concurrent_upload)})),1)]),$("div",oe,[$("p",ne,j(e.$t("Uploads per Minute Limit")),1),$("p",de,j(e.$t("{count} Pictures",{count:w(u).format(null==(r=w(je).group)?void 0:r.group.options.limit_per_minute)})),1)]),$("div",ce,[$("p",ue,j(e.$t("Uploads per Hour Limit")),1),$("p",pe,j(e.$t("{count} Pictures",{count:w(u).format(null==(l=w(je).group)?void 0:l.group.options.limit_per_hour)})),1)]),$("div",xe,[$("p",fe,j(e.$t("Daily Upload Limit")),1),$("p",ge,j(e.$t("{count} Pictures",{count:w(u).format(null==(i=w(je).group)?void 0:i.group.options.limit_per_day)})),1)]),$("div",ye,[$("p",ve,j(e.$t("Weekly Upload Limit")),1),$("p",me,j(e.$t("{count} Pictures",{count:w(u).format(null==(o=w(je).group)?void 0:o.group.options.limit_per_week)})),1)]),$("div",_e,[$("p",ke,j(e.$t("Monthly Upload Limit")),1),$("p",be,j(e.$t("{count} Pictures",{count:w(u).format(null==(n=w(je).group)?void 0:n.group.options.limit_per_month)})),1)])]})),_:1},8,["title"])):h("",!0)])])]})),_:1})])),_:1},8,["header-title"]))}});export{he as default};
