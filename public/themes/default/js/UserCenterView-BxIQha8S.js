import{_ as e,a as l}from"./ExploreImage.vue_vue_type_script_setup_true_lang-DTB10U6K.js";import{c as a,n as s,_ as t,I as o,A as r,b as n}from"./Layout.vue_vue_type_script_setup_true_lang-Bd80f82b.js";import{p as u,B as i,o as c,L as d,S as p,m as v,w as m,x as f,q as x}from"./naive-ui-DFBPfLe9.js";import{k as h,K as b,L as _,M as w,r as g,c as k,P as y,Y as j,U as C,a7 as A,Q as $,j as z,F as q,R as L,N as I,a6 as M,w as U,o as O,a8 as S}from"./vue-vendors-B4XdlKKZ.js";import{_ as B}from"./Content.vue_vue_type_script_setup_true_lang-CEfikmAR.js";import{a as R,a8 as E,a9 as P,a7 as D}from"./index-DZdj2b_n.js";import"./icons-C1_zt0kT.js";import"./photo-components-DTzq5atJ.js";import"./utils-DGAJShNI.js";const F={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},K=[w("path",{d:"M208 352h-64a96 96 0 0 1 0-192h64",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"36"},null,-1),w("path",{d:"M304 160h64a96 96 0 0 1 0 192h-64",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"36"},null,-1),w("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"36",d:"M163.29 256h187.42"},null,-1)],N=h({name:"LinkOutline",render:function(e,l){return _(),b("svg",F,K)}}),Q={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},T=[w("path",{d:"M256 48c-79.5 0-144 61.39-144 137c0 87 96 224.87 131.25 272.49a15.77 15.77 0 0 0 25.5 0C304 409.89 400 272.07 400 185c0-75.61-64.5-137-144-137z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),w("circle",{cx:"256",cy:"192",r:"48",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)],V=h({name:"LocationOutline",render:function(e,l){return _(),b("svg",Q,T)}}),Y={class:"flex flex-col sm:flex-row sm:space-x-16 w-full p-6"},G={class:"flex basis-1/3 justify-center sm:justify-end shrink-0"},H={class:"flex grow justify-start flex-col space-y-4"},J={class:"flex items-center mb-2"},W={class:"text-3xl font-bold sm:mr-2"},X={key:0,class:"flex items-center space-x-1"},Z={key:1},ee={key:2},le={class:"text-base mb-4"},ae={class:"flex flex-wrap gap-3"},se=h({__name:"UserInfo",props:{user:{type:Object,required:!0,default:()=>{}}},setup(l){const s=g(null),t=l,o=k((()=>{var e;return((null==(e=t.user)?void 0:e.socials)||[]).map((e=>({label:e,props:{onClick:()=>window.open(e)}})))}));function r(){var e;null==(e=s.value)||e.open({path:{username:t.user.username}})}return(l,n)=>{var v,m;return _(),b(q,null,[y(e,{ref_key:"reportRef",ref:s,type:"user"},null,512),w("div",Y,[w("div",G,[y(j(u),{round:"",size:120,src:j(a).getUserAvatar(t.user.avatar_url)},null,8,["src"])]),w("div",H,[w("div",J,[w("div",W,A(t.user.name),1),y(j(i),{secondary:"",strong:"",size:"tiny",onClick:r},{default:$((()=>[z(A(l.$t("Report")),1)])),_:1})]),w("p",null,A(t.user.bio),1),t.user.location?(_(),b("p",X,[y(j(c),{size:16,component:j(V)},null,8,["component"]),n[0]||(n[0]=z()),w("span",null,A(t.user.location),1)])):C("",!0),o.value?(_(),b("div",Z,[y(j(d),{placement:"bottom-start",trigger:"click",options:o.value,"show-arrow":""},{default:$((()=>[y(j(i),{text:""},{icon:$((()=>[y(j(c),{component:j(N)},null,8,["component"])])),default:$((()=>[z(" "+A(l.$t("Social Accounts")),1)])),_:1})])),_:1},8,["options"])])):C("",!0),(null==(v=t.user)?void 0:v.interests)?(_(),b("div",ee,[w("p",le,A(l.$t("Interested Tags")),1),w("div",ae,[(_(!0),b(q,null,L((null==(m=t.user)?void 0:m.interests)||[],(e=>(_(),I(j(p),{bordered:!1},{default:$((()=>[z(A(e),1)])),_:2},1024)))),256))])])):C("",!0)])])],64)}}}),te="/themes/default/assets/png/empty-image-Dvbju7a-.png",oe={class:"flex overflow-hidden rounded-md h-[200px]"},re={class:"flex basis-2/3 border-r shrink-0"},ne=["src"],ue={class:"flex basis-1/3 flex-col"},ie=["src"],ce=["src"],de={class:"flex flex-col w-full mt-4 space-y-2"},pe={class:"text-base truncate"},ve={class:"text-md text-gray-500 dark:text-gray-400"},me=h({__name:"ExploreAlbum",props:{album:{type:Object,required:!0,default:()=>{}}},setup(e){const l=e;return(e,a)=>(_(),b("div",{class:"flex flex-col w-full hover:opacity-75 transition-all cursor-pointer",onClick:a[0]||(a[0]=()=>{return e=`/explore/albums/${l.album.id}`,void window.open(e,"_blank");var e})},[w("div",oe,[w("div",re,[w("img",{src:l.album.covers[0]||j(te),alt:"Album Cover",class:"w-full h-full object-cover"},null,8,ne)]),w("div",ue,[w("img",{src:l.album.covers[1]||j(te),alt:"Album Cover",class:"w-full h-full border-b object-cover shrink-0 overflow-hidden basis-1/2"},null,8,ie),w("img",{src:l.album.covers[2]||j(te),alt:"Album Cover",class:"w-full h-full object-cover shrink-0 overflow-hidden basis-1/2"},null,8,ce)])]),w("div",de,[w("p",pe,A(l.album.name),1),w("p",ve,A(e.$t("{count} photos",{count:j(s).format(l.album.photo_count||0)}))+" 张照片 · Curated by "+A(l.album.user.name),1)])]))}}),fe={class:"flex w-full justify-center my-10 xl:px-60"},xe={class:"w-full px-6"},he={class:"flex items-center space-x-2 text-md"},be={class:"flex items-center space-x-2 text-md"},_e={class:"my-10"},we={class:"masonry-container"},ge={key:1,class:"px-6"},ke={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 sm:gap-8"},ye=n(h({__name:"UserCenterView",setup(e){var a,s;const n=S(),u=M(),i=R();i.configs&&!(null==(s=null==(a=i.configs)?void 0:a.app)?void 0:s.enable_explore)&&u.replace("/404");const d=g({}),p=g("photo"),h=v(),k=g([]),z=g(""),F=g(1),K=g(!1),N=g(!1);async function Q(e={}){var l,a,s,t,o;const r={photo:D,album:P},n=await r[p.value]({query:{q:z.value,page:F.value,username:d.value.username,...e}});if("error"===(null==(l=n.data)?void 0:l.status))return h.error(null==(a=n.data)?void 0:a.message);k.value.push(...(null==(s=n.data)?void 0:s.data.data)||[]),K.value=!1,N.value=(null==(t=n.data)?void 0:t.data.meta.last_page)===(null==(o=n.data)?void 0:o.data.meta.current_page),F.value++}function T(){K.value||N.value||Q()}return U(p,(e=>{k.value=[],z.value="",F.value=1,K.value=!1,N.value=!1,Q()})),O((()=>{E({path:{username:n.params.username.toString()}}).then((e=>{var l,a,s;if("error"===(null==(l=e.data)?void 0:l.status))return u.back(),h.error(null==(a=e.data)?void 0:a.message);d.value=null==(s=e.data)?void 0:s.data,Q()}))})),(e,a)=>(_(),I(t,{"toggle-header":!1,"show-footer":!0,"header-title":e.$t("Square")},{default:$((()=>[y(B,null,{default:$((()=>[w("div",fe,[y(se,{user:d.value},null,8,["user"])]),w("div",xe,[y(j(m),{type:"line",animated:"",value:p.value,"onUpdate:value":a[0]||(a[0]=e=>p.value=e)},{default:$((()=>[y(j(f),{name:"photo"},{default:$((()=>[w("div",he,[y(j(c),{size:20,component:j(o)},null,8,["component"]),w("span",null,A(e.$t("Photo"))+" "+A(d.value.photo_count>999?"999+":d.value.photo_count),1)])])),_:1}),y(j(f),{name:"album"},{default:$((()=>[w("div",be,[y(j(c),{size:20,component:j(r)},null,8,["component"]),w("span",null,A(e.$t("Album"))+" "+A(d.value.album_count>999?"999+":d.value.album_count),1)])])),_:1})])),_:1},8,["value"])]),w("div",_e,["photo"===p.value?(_(),I(j(x),{key:0,onLoad:T},{default:$((()=>[w("div",we,[(_(!0),b(q,null,L(k.value,(e=>(_(),I(l,{photo:e,key:e.id},null,8,["photo"])))),128))])])),_:1})):C("",!0),"album"===p.value?(_(),b("div",ge,[w("div",ke,[(_(!0),b(q,null,L(k.value,(e=>(_(),I(me,{album:e},null,8,["album"])))),256))])])):C("",!0)])])),_:1})])),_:1},8,["header-title"]))}}),[["__scopeId","data-v-55bf42cc"]]);export{ye as default};
