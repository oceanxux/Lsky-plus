import{k as e,$ as a,r as o,N as s,Q as t,P as l,U as r,Y as u,j as n,a7 as d,V as i,M as p,a6 as v,L as c}from"./vue-vendors-B4XdlKKZ.js";import{a as m,i as _,j as f}from"./index-DZdj2b_n.js";import{_ as w}from"./AuthFormCard.vue_vue_type_script_setup_true_lang-e_3_W4XC.js";import{_ as y,a as h}from"./PhoneVerifyInput.vue_vue_type_script_setup_true_lang-BZmXwTCl.js";import{_ as g}from"./Layout.vue_vue_type_script_setup_true_lang-Bd80f82b.js";import{m as b,w as j,x as $,y as k,F as P,t as U,B as x}from"./naive-ui-DFBPfLe9.js";import"./utils-DGAJShNI.js";import"./icons-C1_zt0kT.js";import"./bg-BQwuMl68.js";import"./photo-components-DTzq5atJ.js";const C={class:"flex justify-between"},R=e({__name:"ForgetPassword",setup(e){const R=m(),{t:F}=a(),N=v(),q=b(),z=o(null),B=o({email:"",phone:"",password:"",password_confirmation:"",code:"",country_code:"cn"}),L=async()=>{var e,a;let o;if(o="email"===M.value?await _({body:B.value}):await f({body:B.value}),"error"===(null==(e=o.data)?void 0:e.status))return q.error(null==(a=o.data)?void 0:a.message);N.push("/login").then((()=>q.success(F("Password reset successfully"))))},M=o("email");return(e,a)=>(c(),s(g,{"header-title":e.$t("Forgot Password")},{default:t((()=>[l(w,{title:e.$t("Recover Password")},{default:t((()=>{var o,v;return[(null==(o=u(R).configs)?void 0:o.app.user_phone_verify)?(c(),s(u(j),{key:0,type:"segment",class:"mb-4",value:M.value,"onUpdate:value":a[0]||(a[0]=e=>M.value=e)},{default:t((()=>[l(u($),{name:"email"},{default:t((()=>[n(d(e.$t("Recover via Email")),1)])),_:1}),l(u($),{name:"phone"},{default:t((()=>[n(d(e.$t("Recover via Mobile Number")),1)])),_:1})])),_:1},8,["value"])):r("",!0),l(u(k),{disabled:!(null==(v=u(R).configs)?void 0:v.app.enable_registration),ref_key:"formRef",ref:z,model:B.value,"show-require-mark":!0,onSubmit:i(L,["prevent"])},{default:t((()=>["email"===M.value?(c(),s(y,{key:0,event:"forget_password",email:B.value.email,"onUpdate:email":a[1]||(a[1]=e=>B.value.email=e),code:B.value.code,"onUpdate:code":a[2]||(a[2]=e=>B.value.code=e)},null,8,["email","code"])):r("",!0),"phone"===M.value?(c(),s(h,{key:1,event:"forget_password",phone:B.value.phone,"onUpdate:phone":a[3]||(a[3]=e=>B.value.phone=e),"country-code":B.value.country_code,"onUpdate:countryCode":a[4]||(a[4]=e=>B.value.country_code=e),code:B.value.code,"onUpdate:code":a[5]||(a[5]=e=>B.value.code=e)},null,8,["phone","country-code","code"])):r("",!0),l(u(P),{label:e.$t("New Password")},{default:t((()=>[l(u(U),{value:B.value.password,"onUpdate:value":a[6]||(a[6]=e=>B.value.password=e),placeholder:e.$t("Please enter a new password"),type:"password","show-password-on":"mousedown",size:"large","input-props":{required:!0}},null,8,["value","placeholder"])])),_:1},8,["label"]),l(u(P),{label:e.$t("Confirm New Password"),"show-feedback":!1},{default:t((()=>[l(u(U),{value:B.value.password_confirmation,"onUpdate:value":a[7]||(a[7]=e=>B.value.password_confirmation=e),placeholder:e.$t("Please confirm your new password"),type:"password","show-password-on":"mousedown",size:"large","input-props":{required:!0}},null,8,["value","placeholder"])])),_:1},8,["label"]),l(u(P),null,{default:t((()=>[l(u(x),{type:"primary","attr-type":"submit",size:"large",strong:"",block:""},{default:t((()=>[n(d(e.$t("Confirm Password Reset")),1)])),_:1})])),_:1}),p("div",C,[l(u(x),{text:"",type:"info",onClick:a[8]||(a[8]=e=>u(N).push("/"))},{default:t((()=>[n(d(e.$t("Back to Home")),1)])),_:1}),l(u(x),{text:"",type:"info",onClick:a[9]||(a[9]=e=>u(N).push("/login"))},{default:t((()=>[n(d(e.$t("Return to Login")),1)])),_:1})])])),_:1},8,["disabled","model"])]})),_:1},8,["title"])])),_:1},8,["header-title"]))}});export{R as default};
