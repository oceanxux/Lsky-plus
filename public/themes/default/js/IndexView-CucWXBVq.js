import{a}from"./ExploreImage.vue_vue_type_script_setup_true_lang-DTB10U6K.js";import{k as e,af as t,$ as l,ae as s,o as u,a8 as o,K as r,L as n,P as i,Y as v,V as p,Q as d,a6 as c,r as m,w as _,N as f,M as y,R as g,F as h}from"./vue-vendors-B4XdlKKZ.js";import{a as x,a7 as j}from"./index-DZdj2b_n.js";import{S as q,_ as w,b as S}from"./Layout.vue_vue_type_script_setup_true_lang-Bd80f82b.js";import{y as b,t as k,o as $,m as E,q as z,J as I}from"./naive-ui-DFBPfLe9.js";import{_ as L}from"./Content.vue_vue_type_script_setup_true_lang-CEfikmAR.js";import"./utils-DGAJShNI.js";import"./icons-C1_zt0kT.js";import"./photo-components-DTzq5atJ.js";const M={class:"flex w-full justify-center my-10"},N=e({__name:"ExploreSearch",props:t({placeholder:{type:String,default:"Enter keywords and press Enter to search..."}},{value:{type:String,required:!0},valueModifiers:{}}),emits:["update:value"],setup(a){const{t:e}=l(),t=a,m=s(a,"value"),_=o(),f=c();u((()=>{m.value=_.query.q||""}));const y=()=>{f.push(`/explore?q=${m.value}`)};return(a,e)=>(n(),r("div",M,[i(v(b),{onSubmit:p(y,["prevent"])},{default:d((()=>[i(v(k),{value:m.value,"onUpdate:value":e[0]||(e[0]=a=>m.value=a),round:"",size:"large",placeholder:a.$t(t.placeholder),class:"min-w-[300px] md:min-w-[600px]"},{suffix:d((()=>[i(v($),{component:v(q)},null,8,["component"])])),_:1},8,["value","placeholder"])])),_:1})]))}}),U={class:"w-full"},V={class:"container mx-auto p-4 sm:p-8"},A={class:"masonry-container"},C={key:1,class:"flex justify-center mt-20 container mx-auto"},F=S(e({__name:"IndexView",setup(e){var t,l;const s=o(),p=c(),q=E(),S=x();S.configs&&!(null==(l=null==(t=S.configs)?void 0:t.app)?void 0:l.enable_explore)&&p.replace("/404");const b=m([]),k=m(""),$=m(1),M=m(!1),F=m(!1);async function J(){var a,e,t,l,s;M.value=!0;const u=await j({query:{page:$.value,q:k.value}});if("error"===(null==(a=u.data)?void 0:a.status))return q.error(null==(e=u.data)?void 0:e.message);b.value.push(...(null==(t=u.data)?void 0:t.data.data)||[]),M.value=!1,F.value=(null==(l=u.data)?void 0:l.data.meta.last_page)===(null==(s=u.data)?void 0:s.data.meta.current_page),$.value++}function K(){M.value||F.value||J()}return u((()=>{J()})),_((()=>s.query.q),(a=>{b.value=[],k.value="",$.value=1,M.value=!1,F.value=!1,k.value=(null==a?void 0:a.toString())||"",J()})),(e,t)=>(n(),f(w,{"toggle-header":!1,"show-footer":!0,"header-title":e.$t("Square")},{default:d((()=>[i(L,null,{default:d((()=>[y("div",U,[y("div",V,[i(N,{value:k.value,"onUpdate:value":t[0]||(t[0]=a=>k.value=a)},null,8,["value"])]),b.value.length>0?(n(),f(v(z),{key:0,onLoad:K},{default:d((()=>[y("div",A,[(n(!0),r(h,null,g(b.value,(e=>(n(),f(a,{photo:e,key:e.id},null,8,["photo"])))),128))])])),_:1})):(n(),r("div",C,[i(v(I),{description:e.$t("No data available"),size:"large"},null,8,["description"])]))])])),_:1})])),_:1},8,["header-title"]))}}),[["__scopeId","data-v-16aaeebd"]]);export{F as default};
