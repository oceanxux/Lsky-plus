import{_ as e}from"./Content.vue_vue_type_script_setup_true_lang-CEfikmAR.js";import{k as a,$ as l,r as t,w as r,o as u,N as n,Y as o,V as i,Q as s,P as d,K as c,U as v,j as p,a7 as f,M as m,R as h,F as y,L as b,c as g,a8 as _,a6 as w}from"./vue-vendors-B4XdlKKZ.js";import{b as $,Y as k,Z as P,a as C,$ as U,a0 as x,a1 as q,f as S,a2 as E,a3 as j,a4 as I,a5 as R}from"./index-DZdj2b_n.js";import{c as A,u as V,_ as L}from"./Layout.vue_vue_type_script_setup_true_lang-Bd80f82b.js";import{F as N}from"./icons-C1_zt0kT.js";import{m as D,y as M,A as O,a7 as B,E as T,p as Y,t as F,R as z,B as K,v as Q,a8 as W,J as H,P as J,o as Z,w as G,a9 as X,r as ee}from"./naive-ui-DFBPfLe9.js";import{b as ae,a as le,_ as te}from"./PhoneVerifyInput.vue_vue_type_script_setup_true_lang-BZmXwTCl.js";import"./utils-DGAJShNI.js";import"./photo-components-DTzq5atJ.js";const re={class:"relative"},ue={class:"absolute bottom-1 right-0 rounded-full bg-white w-7 h-7 flex justify-center items-center border"},ne=a({__name:"Info",setup(e){var a,g;const _=D(),w=$(),{t:P}=l(),C=t(!1),U=t({}),x=t(null),q=t(null),S={username:{type:"string",required:!0,trigger:["blur","input"],message:P("Please enter your username")},name:{type:"string",required:!0,trigger:["blur","input"],message:P("Please enter a nickname")}},E=async e=>{var a;e.preventDefault(),null==(a=x.value)||a.validate((async e=>{var a,l,t;if(!e){C.value=!0;const e=await k({body:U.value}).finally((()=>C.value=!1));return"error"===(null==(a=e.data)?void 0:a.status)?_.error(null==(l=e.data)?void 0:l.message):(null==(t=q.value)||t.clear(),await w.fetchUserProfile(),C.value=!1,_.success(P("Successfully updated")))}}))},j=e=>{let a;e.fileList.length>0&&(a=e.fileList[0].file),U.value&&(a?U.value.avatar=a:delete U.value.avatar)},I=e=>{for(const a in e)U.value[`interests[${a}]`]=e[a]},R=e=>{for(const a in e)U.value[`socials[${a}]`]=e[a]},V=t((null==(a=w.profile)?void 0:a.interests)||[]),L=t((null==(g=w.profile)?void 0:g.socials)||[]);r(V,(e=>I(e)),{deep:!0}),r(L,(e=>R(e)),{deep:!0});return u((()=>{var e,a,l,t,r,u,n,o;U.value={name:null==(e=w.profile)?void 0:e.name,username:null==(a=w.profile)?void 0:a.username,tagline:null==(l=w.profile)?void 0:l.tagline,bio:(null==(t=w.profile)?void 0:t.bio)||"",url:(null==(r=w.profile)?void 0:r.url)||"",company:(null==(u=w.profile)?void 0:u.company)||"",company_title:(null==(n=w.profile)?void 0:n.company_title)||"",location:null==(o=w.profile)?void 0:o.location},I(V.value),R(L.value)})),(e,a)=>(b(),n(o(M),{ref_key:"formRef",ref:x,"label-placement":"left","label-width":100,"label-align":"left",model:U.value,rules:S,onSubmit:i(E,["prevent"])},{default:s((()=>[d(o(O),{label:e.$t("Avatar"),path:"avatar"},{default:s((()=>[d(o(B),{ref_key:"uploadRef",ref:q,"list-type":"image","default-upload":!1,accept:".png,.jpg,.jpeg,.gif",max:1,name:"avatar",onChange:j,"with-credentials":""},{default:s((()=>{var a;return[d(o(T),{trigger:"hover",placement:"right",disabled:Boolean(null==(a=U.value)?void 0:a.avatar)},{trigger:s((()=>{var e;return[m("div",re,[d(o(Y),{round:"",src:o(A).getUserAvatar(null==(e=o(w).profile)?void 0:e.avatar_url),class:"w-20 h-20 cursor-pointer"},null,8,["src"]),m("div",ue,[d(o(N),{icon:"fa-pen"})])])]})),default:s((()=>[p(f(e.$t("Click to upload a new avatar. It will take effect after saving."))+" ",1)])),_:1},8,["disabled"])]})),_:1},512)])),_:1},8,["label"]),d(o(O),{label:e.$t("Username"),path:"username"},{default:s((()=>[d(o(F),{value:U.value.username,"onUpdate:value":a[0]||(a[0]=e=>U.value.username=e),maxlength:20,placeholder:e.$t("Please enter your username")},null,8,["value","placeholder"])])),_:1},8,["label"]),d(o(O),{label:e.$t("Nickname"),path:"name"},{default:s((()=>[d(o(F),{value:U.value.name,"onUpdate:value":a[1]||(a[1]=e=>U.value.name=e),maxlength:20,placeholder:e.$t("Please enter a nickname within 20 characters")},null,8,["value","placeholder"])])),_:1},8,["label"]),d(o(O),{label:e.$t("Personal Signature"),path:"tagline"},{default:s((()=>[d(o(F),{value:U.value.tagline,"onUpdate:value":a[2]||(a[2]=e=>U.value.tagline=e),maxlength:100,placeholder:e.$t("This person is diligent and has written a personal signature")},null,8,["value","placeholder"])])),_:1},8,["label"]),d(o(O),{label:e.$t("Personal Introduction"),path:"bio"},{default:s((()=>[d(o(F),{type:"textarea",value:U.value.bio,"onUpdate:value":a[3]||(a[3]=e=>U.value.bio=e),maxlength:200,placeholder:e.$t("Introduce yourself within 200 characters~")},null,8,["value","placeholder"])])),_:1},8,["label"]),d(o(O),{label:e.$t("Personal Website"),path:"url"},{default:s((()=>[d(o(F),{"input-props":{type:"url"},value:U.value.url,"onUpdate:value":a[4]||(a[4]=e=>U.value.url=e),maxlength:200,placeholder:e.$t("Enter personal website URL")},null,8,["value","placeholder"])])),_:1},8,["label"]),d(o(O),{label:e.$t("Company"),path:"company"},{default:s((()=>[d(o(F),{value:U.value.company,"onUpdate:value":a[5]||(a[5]=e=>U.value.company=e),maxlength:80,placeholder:e.$t("Enter company name")},null,8,["value","placeholder"])])),_:1},8,["label"]),d(o(O),{label:e.$t("Position at Company"),path:"company_title"},{default:s((()=>[d(o(F),{value:U.value.company_title,"onUpdate:value":a[6]||(a[6]=e=>U.value.company_title=e),maxlength:20,placeholder:e.$t("Enter your position at the company")},null,8,["value","placeholder"])])),_:1},8,["label"]),d(o(O),{label:e.$t("Location"),path:"location"},{default:s((()=>[d(o(F),{value:U.value.location,"onUpdate:value":a[7]||(a[7]=e=>U.value.location=e),maxlength:80,placeholder:e.$t("Enter location")},null,8,["value","placeholder"])])),_:1},8,["label"]),d(o(O),{label:e.$t("Hobbies")},{default:s((()=>[d(o(z),{value:V.value,"onUpdate:value":a[8]||(a[8]=e=>V.value=e),max:9},null,8,["value"])])),_:1},8,["label"]),L.value.length>0?(b(!0),c(y,{key:0},h(L.value,((a,l)=>(b(),n(o(O),{label:0===l?e.$t("Social Accounts"):" ",path:`socials[${l}]`,rule:{required:!0,message:e.$t("Please enter the link address"),trigger:["input","blur"]}},{default:s((()=>[d(o(F),{"input-props":{type:"url",required:!0},value:L.value[l],"onUpdate:value":e=>L.value[l]=e,maxlength:60,placeholder:e.$t("Link to social profile"),clearable:""},{prefix:s((()=>[d(o(N),{icon:"fa-link",class:"text-gray-500"})])),_:2},1032,["value","onUpdate:value","placeholder"]),d(o(K),{class:"ml-2",onClick:e=>(e=>{L.value.splice(e,1)})(l)},{default:s((()=>[p(f(e.$t("Delete")),1)])),_:2},1032,["onClick"])])),_:2},1032,["label","path","rule"])))),256)):v("",!0),d(o(O),{label:" "},{default:s((()=>[L.value.length<6?(b(),n(o(K),{key:0,onClick:a[9]||(a[9]=e=>{L.value.push("")})},{default:s((()=>[p(f(e.$t("Add")),1)])),_:1})):v("",!0)])),_:1}),d(o(O),{"show-feedback":!1},{default:s((()=>[d(o(K),{"attr-type":"submit",type:"primary",loading:C.value},{default:s((()=>[p(f(e.$t("Confirm Save")),1)])),_:1},8,["loading"])])),_:1})])),_:1},8,["model"]))}}),oe=a({__name:"Password",setup(e){const a=D(),{t:r}=l(),u=t(!1),c=t({current_password:"",password:"",password_confirmation:""}),v=t(null),m={current_password:{type:"string",required:!0,trigger:["blur","input"],message:r("Please enter your old password")},password:{type:"string",required:!0,trigger:["blur","change"],message:r("Please enter a new password")},password_confirmation:{type:"string",required:!0,trigger:["blur","input"],validator:(e,a)=>new Promise(((e,l)=>{a||l(new Error(r("Please confirm your new password"))),a!==c.value.password?l(new Error(r("New password and confirmation do not match"))):e()}))}},h=async e=>{var l;e.preventDefault(),null==(l=v.value)||l.validate((async e=>{var l,t;if(!e){u.value=!0;const e=await P({body:c.value}).finally((()=>u.value=!1));if("error"===(null==(l=e.data)?void 0:l.status))return a.error(null==(t=e.data)?void 0:t.message);a.success(r("Successfully updated. It will take effect next login.")),Object.keys(c.value).forEach((e=>c.value[e]=""))}u.value=!1}))};return(e,a)=>(b(),n(o(M),{ref_key:"formRef",ref:v,"label-placement":"left","label-width":100,"label-align":"left",model:c.value,rules:m,onSubmit:i(h,["prevent"])},{default:s((()=>[d(o(O),{label:e.$t("Old Password"),path:"current_password"},{default:s((()=>[d(o(F),{type:"password","input-props":{type:"password",required:!0},value:c.value.current_password,"onUpdate:value":a[0]||(a[0]=e=>c.value.current_password=e),placeholder:e.$t("Please enter your old password")},null,8,["value","placeholder"])])),_:1},8,["label"]),d(o(O),{label:e.$t("New Password"),path:"password"},{default:s((()=>[d(o(F),{type:"password",minlength:8,"input-props":{type:"password",required:!0},value:c.value.password,"onUpdate:value":a[1]||(a[1]=e=>c.value.password=e),placeholder:e.$t("Please enter a new password, at least 8 characters")},null,8,["value","placeholder"])])),_:1},8,["label"]),d(o(O),{label:e.$t("Confirm New Password"),path:"password_confirmation"},{default:s((()=>[d(o(F),{type:"password",minlength:8,"input-props":{type:"password",required:!0},value:c.value.password_confirmation,"onUpdate:value":a[2]||(a[2]=e=>c.value.password_confirmation=e),placeholder:e.$t("Please confirm your new password, at least 8 characters")},null,8,["value","placeholder"])])),_:1},8,["label"]),d(o(O),{"show-feedback":!1},{default:s((()=>[d(o(K),{"attr-type":"submit",type:"primary",loading:u.value},{default:s((()=>[p(f(e.$t("Confirm Changes")),1)])),_:1},8,["loading"])])),_:1})])),_:1},8,["model"]))}}),ie={class:"space-y-4"},se={class:"flex space-x-1 items-center"},de=["src"],ce={key:1},ve={class:"flex space-x-6 mt-2"},pe=a({__name:"Social",setup(e){const a=_(),r=w(),i=D(),$=C(),{t:k}=l(),P=t([]),E=g((()=>{var e;return((null==(e=$.configs)?void 0:e.app.socialites)||[]).filter((e=>-1===P.value.map((e=>e.driver.id)).indexOf(e.id)))}));return u((()=>{U({query:{page:1,per_page:999}}).then((e=>{var a;P.value=(null==(a=e.data)?void 0:a.data.data)||[]})),a.query.driver_id&&a.query.code&&x({path:{id:a.query.driver_id.toString()},body:{code:a.query.code.toString()}}).then((e=>{var a,l;if("error"===(null==(a=e.data)?void 0:a.status))return i.error(null==(l=e.data)?void 0:l.message);U({query:{page:1,per_page:999}}).then((e=>{var a;P.value=(null==(a=e.data)?void 0:a.data.data)||[]})),r.replace("/user/profile?tab=social"),i.success(k("Bound successfully"))}))})),(e,a)=>(b(),c("div",ie,[d(o(Q),{"show-icon":!1},{default:s((()=>[p(f(e.$t("Bind a third-party account to log in directly with it in the future.")),1)])),_:1}),d(o(W),{bordered:!1},{default:s((()=>[m("thead",null,[m("tr",null,[m("th",null,f(e.$t("Name")),1),m("th",null,f(e.$t("User Information")),1),m("th",null,f(e.$t("Binding Time")),1),a[0]||(a[0]=m("th",null,null,-1))])]),m("tbody",null,[(b(!0),c(y,null,h(P.value,(a=>(b(),c("tr",null,[m("td",null,f(a.driver.name),1),m("td",null,[m("div",se,[a.avatar?(b(),c("img",{key:0,class:"w-8 rounded-full",src:a.avatar,alt:"avatar"},null,8,de)):v("",!0),m("span",null,f(a.name||a.nickname),1)])]),m("td",null,f(o(V)(a.created_at).format("LLL")),1),m("td",null,[d(o(J),{onPositiveClick:e=>{return l=a.driver.id,void q({path:{id:l.toString()}}).then((e=>{var a,l;if("error"===(null==(a=e.data)?void 0:a.status))return i.error(null==(l=e.data)?void 0:l.message);U().then((e=>{var a;P.value=(null==(a=e.data)?void 0:a.data.data)||[]})),i.success(k("Unbound successfully"))}));var l}},{trigger:s((()=>[d(o(K),{type:"primary",text:""},{default:s((()=>[p(f(e.$t("Unbind")),1)])),_:1})])),default:s((()=>[p(f(e.$t("Are you sure you want to unbind this account?"))+" ",1)])),_:2},1032,["onPositiveClick"])])])))),256))])])),_:1}),P.value.length<=0?(b(),n(o(H),{key:0},{default:s((()=>[p(f(e.$t("No third-party accounts bound yet")),1)])),_:1})):v("",!0),E.value.length>0?(b(),c("div",ce,[m("p",null,f(e.$t("You can also bind the following accounts:")),1),m("div",ve,[(b(!0),c(y,null,h(E.value,(e=>(b(),n(o(K),{text:"",onClick:a=>(async e=>{var a,l;const t=await S({path:{id:e.id.toString()},query:{redirect_url:`${A.getWithoutQueryUrl()}?tab=social&driver_id=${e.id}`}});if("error"===(null==(a=t.data)?void 0:a.status))return i.error(null==(l=t.data)?void 0:l.message);window.location.replace(t.data.data.redirect_url)})(e)},{icon:s((()=>[d(o(Z),{component:o(A).getSocialiteIcon(e.provider)},null,8,["component"])])),default:s((()=>[p(" "+f(e.name),1)])),_:2},1032,["onClick"])))),256))])])):v("",!0)]))}}),fe={key:0},me={key:0},he={key:1},ye=a({__name:"Phone",setup(e){const a=D(),r=$(),u=C(),{t:i}=l(),h=t(!1),g=t(!1),_=t({country_code:"cn",phone:"",code:""}),w=t({code:""}),k=t(""),P=t(""),U=t(null),x=t(null),q={phone:{type:"string",required:!0,trigger:["blur","change"],message:i("Please enter a new mobile number")},code:{type:"string",required:!0,trigger:["blur","change"],message:i("Please enter the mobile verification code")}},S={code:{type:"string",required:!0,trigger:["blur","change"],message:i("Please enter the mobile verification code")}},I=t(i("Send SMS Verification Code")),R=t(!1),A=async()=>{var e,l,t;if(!k.value)return a.error(i("Please enter captcha"));if(!P.value)return a.error(i("Captcha key is missing, please refresh the captcha"));const u=await E({body:{event:"bind",country_code:(null==(e=r.profile)?void 0:e.country_code)||"cn",phone:(null==(l=r.profile)?void 0:l.phone)||"",captcha:k.value,captcha_key:P.value}});"success"===(null==(t=u.data)?void 0:t.status)?(()=>{let e=60;R.value=!0;const a=setInterval((()=>{e--,I.value=i("Resend after {seconds} seconds",{seconds:e}),e<=0&&(R.value=!1,I.value=i("Send SMS Verification Code"),clearInterval(a))}),1e3)})():a.error(u.data.message)},V=async e=>{var l;e.preventDefault(),null==(l=U.value)||l.validate((async e=>{var l,t;if(!e){h.value=!0;const e=await j({body:_.value}).finally((()=>h.value=!1));if("error"===(null==(l=e.data)?void 0:l.status))return a.error(null==(t=e.data)?void 0:t.message);await r.fetchUserProfile(),Object.keys(_.value).forEach((e=>_.value[e]=""))}h.value=!1}))},L=async e=>{var l;e.preventDefault(),null==(l=x.value)||l.validate((async e=>{var l,t,u,n;if(!e){g.value=!0;const e=await j({body:{country_code:(null==(l=r.profile)?void 0:l.country_code)||"cn",phone:(null==(t=r.profile)?void 0:t.phone)||"",code:w.value.code}}).finally((()=>g.value=!1));if("error"===(null==(u=e.data)?void 0:u.status))return a.error(null==(n=e.data)?void 0:n.message);await r.fetchUserProfile(),a.success(i("Phone verified successfully")),w.value.code=""}g.value=!1}))};return(e,a)=>{var l,t,i;return b(),c(y,null,[(null==(l=o(u).configs)?void 0:l.app.user_phone_verify)&&(null==(t=o(r).profile)?void 0:t.phone)&&!(null==(i=o(r).profile)?void 0:i.phone_verified_at)?(b(),c("div",fe,[d(o(M),{ref_key:"verifyFormRef",ref:x,"label-placement":"left","label-width":100,"label-align":"left",model:w.value,rules:S},{default:s((()=>[d(o(O),null,{default:s((()=>[d(o(Q),{type:"warning","show-icon":!1},{default:s((()=>[p(f(e.$t("Your phone number has not been verified. Please verify your phone number for account security and to access all features. Click the button below to send a verification code to your current phone number.")),1)])),_:1})])),_:1}),d(o(O),{label:e.$t("Current Mobile Number")},{default:s((()=>{var e;return[d(o(F),{"default-value":null==(e=o(r).profile)?void 0:e.phone,disabled:""},null,8,["default-value"])]})),_:1},8,["label"]),d(o(O),{label:e.$t("Captcha"),"show-require-mark":""},{default:s((()=>[d(ae,{captcha:k.value,"onUpdate:captcha":a[0]||(a[0]=e=>k.value=e),"captcha-key":P.value,"onUpdate:captchaKey":a[1]||(a[1]=e=>P.value=e)},null,8,["captcha","captcha-key"])])),_:1},8,["label"]),d(o(O),{label:e.$t("Verification Code"),"show-require-mark":""},{default:s((()=>[d(o(F),{value:w.value.code,"onUpdate:value":a[2]||(a[2]=e=>w.value.code=e),"input-props":{required:!0},placeholder:e.$t("Please enter the SMS verification code")},{suffix:s((()=>[d(o(K),{text:"",type:"info",onClick:A,disabled:R.value||!k.value},{default:s((()=>[p(f(I.value),1)])),_:1},8,["disabled"])])),_:1},8,["value","placeholder"])])),_:1},8,["label"]),d(o(O),{"show-feedback":!1},{default:s((()=>[d(o(K),{type:"primary",loading:g.value,onClick:L},{default:s((()=>[p(f(e.$t("Verify Phone")),1)])),_:1},8,["loading"])])),_:1})])),_:1},8,["model"]),a[6]||(a[6]=m("div",{class:"border-b border-gray-200 dark:border-gray-700 my-6"},null,-1))])):v("",!0),d(o(M),{ref_key:"formRef",ref:U,"label-placement":"left","label-width":100,"label-align":"left",model:_.value,rules:q},{default:s((()=>{var l;return[(null==(l=o(r).profile)?void 0:l.phone)?(b(),n(o(O),{key:0,label:e.$t("Current Mobile Number")},{default:s((()=>{var e;return[d(o(F),{"default-value":null==(e=o(r).profile)?void 0:e.phone,disabled:""},null,8,["default-value"])]})),_:1},8,["label"])):v("",!0),d(o(O),null,{default:s((()=>[d(o(Q),{"show-icon":!1},{default:s((()=>{var a;return[(null==(a=o(r).profile)?void 0:a.phone)?(b(),c("p",me,f(e.$t("To change your mobile number, please enter the new number in the form below. A verification code will be sent to the new number. Once verified, you can update your mobile number.")),1)):(b(),c("p",he,f(e.$t("According to national laws and regulations, the account must be bound to at least one mobile number.")),1))]})),_:1})])),_:1}),d(le,{event:"bind","country-code":_.value.country_code,"onUpdate:countryCode":a[3]||(a[3]=e=>_.value.country_code=e),phone:_.value.phone,"onUpdate:phone":a[4]||(a[4]=e=>_.value.phone=e),code:_.value.code,"onUpdate:code":a[5]||(a[5]=e=>_.value.code=e),size:"medium"},null,8,["country-code","phone","code"]),d(o(O),{"show-feedback":!1},{default:s((()=>[d(o(K),{type:"primary",loading:h.value,onClick:V},{default:s((()=>{var a;return[p(f(e.$t("Confirm"))+f((null==(a=o(r).profile)?void 0:a.phone)?e.$t("Change"):e.$t("Bind")),1)]})),_:1},8,["loading"])])),_:1})]})),_:1},8,["model"])],64)}}}),be={key:0},ge=a({__name:"Email",setup(e){const a=D(),r=$(),u=C(),{t:n}=l(),i=t(!1),h=t(!1),g=t({email:"",code:""}),_=t({code:""}),w=t(""),k=t(""),P=t(null),U=t(null),x={email:{type:"string",required:!0,trigger:["blur","input"],message:n("Please enter a new email")},code:{type:"string",required:!0,trigger:["blur","input"],message:n("Please enter the email verification code")}},q={code:{type:"string",required:!0,trigger:["blur","input"],message:n("Please enter the email verification code")}},S=async e=>{var l;e.preventDefault(),null==(l=P.value)||l.validate((async e=>{var l,t;if(!e){i.value=!0;const e=await I({body:g.value}).finally((()=>i.value=!1));if("error"===(null==(l=e.data)?void 0:l.status))return a.error(null==(t=e.data)?void 0:t.message);await r.fetchUserProfile(),Object.keys(g.value).forEach((e=>g.value[e]=""))}i.value=!1}))},E=async e=>{var l;e.preventDefault(),null==(l=U.value)||l.validate((async e=>{var l,t,u;if(!e){h.value=!0;const e=await I({body:{email:(null==(l=r.profile)?void 0:l.email)||"",code:_.value.code}}).finally((()=>h.value=!1));if("error"===(null==(t=e.data)?void 0:t.status))return a.error(null==(u=e.data)?void 0:u.message);await r.fetchUserProfile(),a.success(n("Email verified successfully")),_.value.code=""}h.value=!1}))},j=t(n("Send Email Verification Code")),A=t(!1),V=async()=>{var e,l;if(!w.value)return a.error(n("Please enter captcha"));if(!k.value)return a.error(n("Captcha key is missing, please refresh the captcha"));const t=await R({body:{event:"bind",email:(null==(e=r.profile)?void 0:e.email)||"",captcha:w.value,captcha_key:k.value}});"success"===(null==(l=t.data)?void 0:l.status)?(()=>{let e=60;A.value=!0;const a=setInterval((()=>{e--,j.value=n("Resend after {seconds} seconds",{seconds:e}),e<=0&&(A.value=!1,j.value=n("Send Email Verification Code"),clearInterval(a))}),1e3)})():a.error(t.data.message)};return(e,a)=>{var l,t,n;return b(),c(y,null,[(null==(l=o(u).configs)?void 0:l.app.user_email_verify)&&!(null==(t=o(r).profile)?void 0:t.email_verified_at)&&(null==(n=o(r).profile)?void 0:n.email)?(b(),c("div",be,[d(o(M),{ref_key:"verifyFormRef",ref:U,"label-placement":"left","label-width":100,"label-align":"left",model:_.value,rules:q},{default:s((()=>[d(o(O),null,{default:s((()=>[d(o(Q),{type:"warning","show-icon":!1},{default:s((()=>[p(f(e.$t("Your email has not been verified. Please verify your email for account security and to access all features. Click the button below to send a verification code to your current email.")),1)])),_:1})])),_:1}),d(o(O),{label:e.$t("Current Email")},{default:s((()=>{var e;return[d(o(F),{"default-value":null==(e=o(r).profile)?void 0:e.email,disabled:""},null,8,["default-value"])]})),_:1},8,["label"]),d(o(O),{label:e.$t("Captcha"),"show-require-mark":""},{default:s((()=>[d(ae,{captcha:w.value,"onUpdate:captcha":a[0]||(a[0]=e=>w.value=e),"captcha-key":k.value,"onUpdate:captchaKey":a[1]||(a[1]=e=>k.value=e),size:"small"},null,8,["captcha","captcha-key"])])),_:1},8,["label"]),d(o(O),{label:e.$t("Verification Code"),"show-require-mark":""},{default:s((()=>[d(o(F),{value:_.value.code,"onUpdate:value":a[2]||(a[2]=e=>_.value.code=e),"input-props":{required:!0},placeholder:e.$t("Please enter the email verification code")},{suffix:s((()=>[d(o(K),{text:"",type:"info",onClick:V,disabled:A.value||!w.value},{default:s((()=>[p(f(j.value),1)])),_:1},8,["disabled"])])),_:1},8,["value","placeholder"])])),_:1},8,["label"]),d(o(O),{"show-feedback":!1},{default:s((()=>[d(o(K),{type:"primary",loading:h.value,onClick:E},{default:s((()=>[p(f(e.$t("Verify Email")),1)])),_:1},8,["loading"])])),_:1})])),_:1},8,["model"]),a[5]||(a[5]=m("div",{class:"border-b border-gray-200 dark:border-gray-700 my-6"},null,-1))])):v("",!0),d(o(M),{ref_key:"formRef",ref:P,"label-placement":"left","label-width":100,"label-align":"left",model:g.value,rules:x},{default:s((()=>[d(o(O),{label:e.$t("Current Email")},{default:s((()=>{var e;return[d(o(F),{"default-value":null==(e=o(r).profile)?void 0:e.email,disabled:""},null,8,["default-value"])]})),_:1},8,["label"]),d(o(O),null,{default:s((()=>[d(o(Q),{"show-icon":!1},{default:s((()=>[p(f(e.$t("To change your email address, please enter the new email in the form below. A verification code will be sent to the new email. Once verified, you can update your email.")),1)])),_:1})])),_:1}),d(te,{event:"bind",email:g.value.email,"onUpdate:email":a[3]||(a[3]=e=>g.value.email=e),code:g.value.code,"onUpdate:code":a[4]||(a[4]=e=>g.value.code=e),size:"medium"},null,8,["email","code"]),d(o(O),{"show-feedback":!1},{default:s((()=>[d(o(K),{type:"primary",loading:i.value,onClick:S},{default:s((()=>[p(f(e.$t("Confirm Change")),1)])),_:1},8,["loading"])])),_:1})])),_:1},8,["model"])],64)}}}),_e=a({__name:"IndexView",setup(a){const l=_(),r=w(),u=C(),i=t(l.query.tab?l.query.tab.toString():"basic"),c=e=>{r.replace(`/user/profile?tab=${e}`)};return(a,l)=>(b(),n(L,{"header-title":a.$t("Profile"),"toggle-header":!1,"show-footer":!1},{default:s((()=>[d(e,{class:"mx-auto p-4 md:p-10 space-y-10"},{default:s((()=>[d(o(G),{type:"line","default-value":i.value,"on-update-value":c,animated:""},{default:s((()=>{var e;return[d(o(X),{name:"basic",tab:a.$t("Personal Information")},{default:s((()=>[d(o(ee),null,{default:s((()=>[d(ne)])),_:1})])),_:1},8,["tab"]),d(o(X),{name:"email",tab:a.$t("Email")},{default:s((()=>[d(o(ee),null,{default:s((()=>[d(ge)])),_:1})])),_:1},8,["tab"]),(null==(e=o(u).configs)?void 0:e.app.user_phone_verify)?(b(),n(o(X),{key:0,name:"phone",tab:a.$t("Mobile Number")},{default:s((()=>[d(o(ee),null,{default:s((()=>[d(ye)])),_:1})])),_:1},8,["tab"])):v("",!0),d(o(X),{name:"social",tab:a.$t("Third-Party Accounts")},{default:s((()=>[d(o(ee),null,{default:s((()=>[d(pe)])),_:1})])),_:1},8,["tab"]),d(o(X),{name:"password",tab:a.$t("Change Password")},{default:s((()=>[d(o(ee),null,{default:s((()=>[d(oe)])),_:1})])),_:1},8,["tab"])]})),_:1},8,["default-value"])])),_:1})])),_:1},8,["header-title"]))}});export{_e as default};
