import{k as e,$ as t,r as l,N as a,Q as s,P as u,Y as r,M as i,V as o,j as n,a7 as p,a6 as v,L as d}from"./vue-vendors-B4XdlKKZ.js";import{_ as c}from"./Layout.vue_vue_type_script_setup_true_lang-Bd80f82b.js";import{_ as m}from"./Content.vue_vue_type_script_setup_true_lang-CEfikmAR.js";import{P as _}from"./index-DZdj2b_n.js";import{_ as f}from"./Back.vue_vue_type_script_setup_true_lang-CZlTXmSD.js";import{m as h,T as g,r as y,y as b,A as k,t as j,C as $,B as x}from"./naive-ui-DFBPfLe9.js";import"./icons-C1_zt0kT.js";import"./photo-components-DTzq5atJ.js";import"./utils-DGAJShNI.js";const P={class:"space-x-2"},w=e({__name:"CreateView",setup(e){const w=h(),C=v(),{t:T}=t(),L=l(!1),q=l({level:"low"}),U=l(null),A={title:{type:"string",required:!0,trigger:["blur","input"],message:T("Please enter the ticket title")},level:{type:"string",required:!0,trigger:["blur","input"],message:T("Please select the ticket level")},content:{type:"string",required:!0,trigger:["blur","input"],message:T("Please describe the issue you encountered")}},B=[{label:T("Low"),value:"low"},{label:T("Medium"),value:"medium"},{label:T("High"),value:"high"}],D=async e=>{var t;e.preventDefault(),null==(t=U.value)||t.validate((async e=>{var t,l,a;if(!e){L.value=!0;const e=await _({body:q.value}).finally((()=>L.value=!1));return"error"===(null==(t=e.data)?void 0:t.status)?w.error(null==(l=e.data)?void 0:l.message):(L.value=!1,C.push(`/user/tickets/${null==(a=e.data)?void 0:a.data.issue_no}`))}}))};return(e,t)=>(d(),a(c,{"header-title":e.$t("Create Ticket"),"toggle-header":!1,"show-footer":!1},{default:s((()=>[u(m,{class:"mx-auto p-4 md:p-10 space-y-10"},{default:s((()=>[u(r(g),{vertical:""},{default:s((()=>[i("div",P,[u(f,{to:"/user/tickets"})]),u(r(y),null,{default:s((()=>[u(r(b),{ref_key:"formRef",ref:U,"label-placement":"left","label-width":100,"label-align":"left",model:q.value,rules:A,onSubmit:o(D,["prevent"])},{default:s((()=>[u(r(k),{label:e.$t("Ticket Title"),path:"title"},{default:s((()=>[u(r(j),{value:q.value.title,"onUpdate:value":t[0]||(t[0]=e=>q.value.title=e),maxlength:20,placeholder:e.$t("Please enter the ticket title")},null,8,["value","placeholder"])])),_:1},8,["label"]),u(r(k),{label:e.$t("Ticket Level"),path:"level"},{default:s((()=>[u(r($),{options:B,value:q.value.level,"onUpdate:value":t[1]||(t[1]=e=>q.value.level=e),placeholder:e.$t("Please select the ticket level")},null,8,["value","placeholder"])])),_:1},8,["label"]),u(r(k),{label:e.$t("Issue Description"),path:"content"},{default:s((()=>[u(r(j),{type:"textarea",maxlength:2e3,value:q.value.content,"onUpdate:value":t[2]||(t[2]=e=>q.value.content=e),placeholder:e.$t("Please enter the issue description")},null,8,["value","placeholder"])])),_:1},8,["label"]),u(r(k),{class:"flex justify-end"},{default:s((()=>[u(r(x),{"attr-type":"submit",type:"primary",loading:L.value},{default:s((()=>[n(p(e.$t("Confirm Creation")),1)])),_:1},8,["loading"])])),_:1})])),_:1},8,["model"])])),_:1})])),_:1})])),_:1})])),_:1},8,["header-title"]))}});export{w as default};
